(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[676],{2052:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});var r=n(6252),o=n(3577),a=n(9963),s={class:"flex flex-col gap-2"},u={class:"font-bold"},i=["type","name"];function c(t,e,n,c,l,d){return(0,r.wg)(),(0,r.iD)("label",s,[(0,r._)("span",u,(0,o.zw)(d.label),1),(0,r.wy)((0,r._)("input",{type:n.type,class:"shadow-md dark:bg-neutral-600 dark:text-white form-input mt-1 block w-full rounded border",name:c.obj[n.property],"onUpdate:modelValue":e[0]||(e[0]=function(t){return c.obj[n.property]=t})},null,8,i),[[a.YZ,c.obj[n.property]]])])}var l=n(8225),d={props:{which:String,property:String,type:{type:String,default:"text"}},setup:function(t){var e=(0,r.f3)("".concat(t.which,"Data"));return{obj:e}},computed:{label:function(){return(0,l.PS)(this.property)}}},m=n(3744);const p=(0,m.Z)(d,[["render",c]]);var f=p},356:function(t,e,n){"use strict";n.d(e,{Z:function(){return V}});var r=n(6252),o=n(3577),a=n(9963),s={class:"w-full flex flex-col gap-5"},u={class:"w-full mx-auto bg-neutral-50 dark:bg-neutral-600 dark:text-white shadow-md rounded"},i={class:"text-xs font-bold text-gray-500 dark:text-gray-300 pt-2 pl-2"},c={class:"flex flex-col px-4"},l={class:"p-2 py-5 border-b"},d={class:"font-bold text-xl dark:text-white text-black"},m={class:"py-4 px-3"},p={class:"py-2 w-full bg-neutral-50 dark:bg-neutral-600 dark:text-white drop-shadow-md rounded"},f={class:"px-5 py-5"},h={key:0},g=(0,r.Uk)(" Comments: "),y={key:1},w={key:2};function b(t,e,n,b,v,x){var k=(0,r.up)("show-more-button"),C=(0,r.up)("input-comment"),_=(0,r.up)("comment-single");return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",u,[(0,r._)("div",i,[(0,r._)("span",null,"Posted by: "+(0,o.zw)(n.post.user.username)+": "+(0,o.zw)(x.createdAt),1)]),(0,r._)("div",c,[(0,r._)("div",l,[(0,r._)("h3",d,(0,o.zw)(n.post.title),1)]),(0,r.Wm)(k,null,{section:(0,r.w5)((function(){return[(0,r._)("div",m,(0,o.zw)(n.post.str),1)]})),_:1})])]),(0,r._)("div",p,[(0,r.Wm)(C,{postComments:n.post.comments,postId:n.post.id},null,8,["postComments","postId"]),(0,r._)("div",f,[v.showComments?((0,r.wg)(),(0,r.iD)("div",h,[g,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.post.comments,(function(t){return(0,r.wg)(),(0,r.j4)(_,{key:t.id,comment:t},null,8,["comment"])})),128))])):n.post.comments.length>0?((0,r.wg)(),(0,r.iD)("div",y,[(0,r._)("button",{class:"w-full hover:text-blue-400 p-2 text-md",onClick:e[0]||(e[0]=(0,a.iM)((function(t){return v.showComments=!v.showComments}),["prevent"]))}," Show comments ")])):((0,r.wg)(),(0,r.iD)("div",w,"No comments"))])])])}var v={class:"p-2"},x={class:"text-xs font-semibold"},k={class:"pl-2"};function C(t,e,n,a,s,u){return(0,r.wg)(),(0,r.iD)("div",v,[(0,r._)("div",x,(0,o.zw)(n.comment.user.username)+": "+(0,o.zw)(u.createdAt),1),(0,r._)("div",k,(0,o.zw)(n.comment.text),1)])}var _=n(8225),S={props:{comment:Object},computed:{createdAt:function(){return(0,_.Mu)(this.comment.createdAt)}}},I=n(3744);const j=(0,I.Z)(S,[["render",C]]);var A=j,T={class:"p-2 flex flex-col justify-center"},E={class:"w-100 flex justify-center"};function $(t,e,n,o,s,u){return(0,r.wg)(),(0,r.iD)("div",T,[(0,r._)("form",{class:"flex flex-col gap-5",onSubmit:e[2]||(e[2]=(0,a.iM)((function(t){return u.comment()}),["prevent"]))},[(0,r._)("div",E,[(0,r._)("button",{onKeyup:e[0]||(e[0]=(0,a.D2)((function(){return t.submit&&t.submit.apply(t,arguments)}),["enter"])),class:"text-md rounded-full border shadow-md border-blue-400 bg-white px-5 py-1 transition-all hover:bg-blue-400 hover:text-white hover:dark:text-white dark:bg-sky-800 dark:border-0 hover:dark:bg-sky-700"}," Comment ",32)]),(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return s.commentText=t}),class:"form-textarea rounded border w-full h-12 max-h-24 mb-0.5 shadow-lg transition-all resize-none hover:h-24 focus:h-24 dark:bg-neutral-700",placeholder:"Insert comment here"},null,512),[[a.nr,s.commentText]])],32)])}var O=n(8534),R=(n(5666),n(1539),n(8862),n(2262)),D={props:{postId:String,postComments:Array},setup:function(t){var e=(0,r.f3)("authenticated"),n=(0,R.Vh)(t,"postComments");return{comments:n,isAuthenticated:e}},data:function(){return{commentText:""}},methods:{comment:function(){var t=this;return(0,O.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.commentText){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          mutation CREATE_COMMENT($userId: String!, $postId: String!, $commentInput: CommentInput!) {\n            createComment(userId: $userId, postId: $postId, commentInput: $commentInput) {\n              id\n              text\n              user {\n                id\n                username\n              }\n              replies {\n                id\n                text\n              }\n            }\n          }\n          ",variables:{userId:JSON.parse(sessionStorage.getItem("user")).id,postId:t.postId,commentInput:{text:t.commentText}}})}).then((function(t){return t.json()})).then((function(t){return t.data.createComment}));case 4:n=e.sent,console.log(t.comments),t.comments.push(n),t.commentText="";case 8:case"end":return e.stop()}}),e)})))()}}};const Z=(0,I.Z)(D,[["render",$]]);var M=Z,N=(0,r._)("div",{class:"blur group-hover:bg-black/60 w-full h-10 transition-all ease-in-out"},null,-1),P=(0,r._)("div",{class:"group-hover:opacity-100 opacity-0 relative bottom-10"}," Show more ",-1),q=[N,P];function z(t,e,n,a,s,u){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",{ref:"mainPost",class:(0,o.C_)(["p-2 overflow-hidden",s.showMore?"":"max-h-72"])},[(0,r.WI)(t.$slots,"section")],2),(0,r._)("button",{class:(0,o.C_)([s.showMore?"hidden":"","w-full absolute bottom-0 h-10 text-center text-white leading-9"]),onClick:e[0]||(e[0]=function(t){return s.showMore=!s.showMore})},q,2)],64)}var W={data:function(){return{showMore:!1}},mounted:function(){this.showMore=this.$refs.mainPost.offsetHeight==this.$refs.mainPost.scrollHeight}};const J=(0,I.Z)(W,[["render",z]]);var Y=J,H={props:{post:Object},data:function(){return{showComments:!1}},computed:{createdAt:function(){return(0,_.Mu)(this.post.createdAt)}},components:{CommentSingle:A,InputComment:M,ShowMoreButton:Y}};const U=(0,I.Z)(H,[["render",b]]);var V=U},3676:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return N}});var r=n(6252),o=n(3577),a={class:"home flex flex-col md:flex-row gap-5 justify-center"},s={class:"flex flex-col gap-2 w-60 h-fit rounded p-5 bg-neutral-100 dark:bg-neutral-600 dark:text-white shadow-md text-center"},u=(0,r._)("span",{class:"text-sm"},"Create your own community or post to another communities that you are in here:",-1),i=(0,r.Uk)("Create post"),c=(0,r.Uk)("Create community");function l(t,e,n,l,d,m){var p=(0,r.up)("create-community"),f=(0,r.up)("random-posts"),h=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(p,{class:(0,o.C_)(d.showAddCommunity?"":"hidden"),onClose:e[0]||(e[0]=function(t){return d.showAddCommunity=!1})},null,8,["class"]),(0,r._)("div",a,[(0,r.Wm)(f,{class:"md:w-1/2 w-full"}),(0,r._)("div",s,[u,(0,r.Wm)(h,{to:"/submit",class:"w-full py-1 shadow-sm self-end dark:bg-sky-800 hover:dark:bg-sky-700 bg-blue-500 text-white text-sm dark:text-neutral-200 rounded-full hover:bg-blue-400 transition-all font-bold"},{default:(0,r.w5)((function(){return[i]})),_:1}),(0,r.Wm)(h,{onClick:e[1]||(e[1]=function(t){return d.showAddCommunity=!d.showAddCommunity}),to:"/",class:"w-full py-1 shadow-sm self-end dark:bg-sky-800 hover:dark:bg-sky-700 bg-blue-500 text-sm text-white dark:text-neutral-200 rounded-full hover:bg-blue-400 transition-all font-bold"},{default:(0,r.w5)((function(){return[c]})),_:1})])])],64)}function d(t,e,n,o,a,s){var u=(0,r.up)("post-single");return(0,r.wg)(),(0,r.iD)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.posts,(function(t){return(0,r.wg)(),(0,r.j4)(u,{key:t.id,post:t},null,8,["post"])})),128))])}var m=n(8534),p=(n(5666),n(1539),n(8862),n(356)),f={data:function(){return{posts:[]}},created:function(){var t=this;return(0,m.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n                query LIST_POSTS {\n                    posts {\n                        id\n                        title\n                        str\n                        createdAt\n                        user {\n                            id\n                            username\n                        }\n                        comments {\n                            id\n                            text\n                            createdAt\n                            user {\n                                id\n                                username\n                            }\n                        }\n                    }\n                }\n            "})}).then((function(t){return t.json()})).then((function(t){return t.data.posts}));case 2:t.posts=e.sent;case 3:case"end":return e.stop()}}),e)})))()},components:{PostSingle:p.Z}},h=n(3744);const g=(0,h.Z)(f,[["render",d]]);var y=g,w=(n(8309),n(9963)),b={class:"bg-neutral-50 dark:bg-neutral-700 dark:text-white px-20 py-10 rounded transition-all z-50 shadow-md"},v={class:"flex justify-between border-b py-2"},x=(0,r._)("h2",{class:"font-bold w-full py-2"},"Create a community",-1),k={class:"flex flex-col gap-5 py-10"},C={class:"flex flex-col gap-5"},_={class:"py-2 flex flex-col gap-2"},S={class:"flex gap-2 select-none flex-wrap"},I=["onClick"],j={class:"flex shadow-md"},A=(0,r._)("span",{class:"text-xs leading-normal font-semibold text-neutral-500"},"*You won't be able to change the category after creating the community",-1);function T(t,e,n,a,s,u){var i=(0,r.up)("input-component");return(0,r.wg)(),(0,r.iD)("div",{class:"fixed top-0 left-0 w-full h-full flex justify-center p-40 bg-black/75 z-40",onClick:e[4]||(e[4]=(0,w.iM)((function(e){return t.$emit("close")}),["self"]))},[(0,r._)("div",b,[(0,r._)("div",v,[x,(0,r._)("button",{class:"self-end font-bold dark:text-white text-black hover:text-white py-2 px-4 shadow-sm transition-all hover:bg-red-400 border-red-400 rounded-full border",onClick:e[0]||(e[0]=(0,w.iM)((function(e){return t.$emit("close")}),["prevent"]))}," X ")]),(0,r._)("div",k,[(0,r._)("div",C,[(0,r.Wm)(i,{which:"community",property:"name"}),(0,r.Wm)(i,{which:"community",property:"description"})]),(0,r._)("div",_,[(0,r._)("div",S,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.categories,(function(t){return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)([{"bg-sky-500 text-white":s.selectedCategory===t.name},"border px-3 border-sky-500 cursor-pointer rounded-full"]),key:t.id,onClick:function(e){return s.selectedCategory=s.selectedCategory!==t.name?t.name:""}},(0,o.zw)(t.name),11,I)})),128))]),(0,r._)("div",j,[(0,r.wy)((0,r._)("input",{class:"dark:bg-neutral-600 dark:text-white form-input shadow-none w-full rounded-l border","onUpdate:modelValue":e[1]||(e[1]=function(t){return s.category=t})},null,512),[[w.nr,s.category]]),(0,r._)("button",{type:"button",onClick:e[2]||(e[2]=function(t){return u.addCategory()}),class:"rounded-r px-8 text-sm text-white bg-blue-600 hover:bg-blue-500 transition-all"}," Add ")]),A]),(0,r._)("button",{class:"rounded-full bg-blue-600 hover:bg-blue-500 p-2 transition-all text-white font-bold text-sm",onClick:e[3]||(e[3]=function(t){return u.createCommunity()})}," Create ")])])])}n(1703),n(2526),n(1817);var E=n(2262),$=n(2052),O={data:function(){return{categories:[],category:"",selectedCategory:""}},setup:function(){var t=(0,E.iH)({name:"",description:"",categoryName:""});(0,r.JJ)("communityData",t);var e=(0,r.f3)("authenticated");return{obj:t,isAuthenticated:e}},created:function(){var t=this;return(0,m.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n        query LIST_CATEGORIES {\n            categories {\n                id\n                name\n            }\n        }"})}).then((function(t){return t.json()})).then((function(t){return t.data.categories}));case 2:t.categories=e.sent;case 3:case"end":return e.stop()}}),e)})))()},methods:{addCategory:function(){var t=this;return(0,m.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n            mutation CREATE_CATEGORY($categoryInput: CategoryInput!) {\n                createCategory(categoryInput: $categoryInput) {\n                    id\n                    name\n                }\n            }\n            ",variables:{categoryInput:{name:t.category}}})}).then((function(t){return t.json()})).then((function(e){if(null==e.data)throw new Error(e);t.categories.push(e.data.createCategory)})).catch((function(t){throw t}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},createCommunity:function(){var t=this;return(0,m.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.selectedCategory){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          mutation CREATE_COMMUNITY($categoryName: String!, $userId: String!, $community: CommunityInput!) {\n            createCommunity(categoryName: $categoryName, adminId: $userId, communityInput: $community) {\n                id\n                name\n                description\n            }\n        }",variables:{categoryName:t.selectedCategory,userId:JSON.parse(sessionStorage.getItem("user")).id,community:{name:t.obj.name,description:t.obj.description}}})}).then((function(t){return t.json()})).then((function(t){return t.data.createCommunity}));case 4:n=e.sent,t.$router.push("/community/".concat(n.id));case 6:case"end":return e.stop()}}),e)})))()}},components:{InputComponent:$.Z}};const R=(0,h.Z)(O,[["render",T]]);var D=R,Z={name:"homeView",data:function(){return{showAddCommunity:!1}},components:{RandomPosts:y,CreateCommunity:D}};const M=(0,h.Z)(Z,[["render",l]]);var N=M},2914:function(t,e,n){var r=n(7293),o=n(9114);t.exports=!r((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},8340:function(t,e,n){var r=n(111),o=n(8880);t.exports=function(t,e){r(e)&&"cause"in e&&o(t,"cause",e.cause)}},9191:function(t,e,n){"use strict";var r=n(5005),o=n(2597),a=n(8880),s=n(7976),u=n(7674),i=n(9920),c=n(9587),l=n(6277),d=n(8340),m=n(7741),p=n(2914),f=n(1913);t.exports=function(t,e,n,h){var g=h?2:1,y=t.split("."),w=y[y.length-1],b=r.apply(null,y);if(b){var v=b.prototype;if(!f&&o(v,"cause")&&delete v.cause,!n)return b;var x=r("Error"),k=e((function(t,e){var n=l(h?e:t,void 0),r=h?new b(t):new b;return void 0!==n&&a(r,"message",n),p&&a(r,"stack",m(r.stack,2)),this&&s(v,this)&&c(r,this,k),arguments.length>g&&d(r,arguments[g]),r}));if(k.prototype=v,"Error"!==w&&(u?u(k,x):i(k,x,{name:!0})),i(k,b),!f)try{v.name!==w&&a(v,"name",w),v.constructor=k}catch(C){}return k}}},1703:function(t,e,n){var r=n(2109),o=n(7854),a=n(2104),s=n(9191),u="WebAssembly",i=o[u],c=7!==Error("e",{cause:7}).cause,l=function(t,e){var n={};n[t]=s(t,e,c),r({global:!0,forced:c},n)},d=function(t,e){if(i&&i[t]){var n={};n[t]=s(u+"."+t,e,c),r({target:u,stat:!0,forced:c},n)}};l("Error",(function(t){return function(e){return a(t,this,arguments)}})),l("EvalError",(function(t){return function(e){return a(t,this,arguments)}})),l("RangeError",(function(t){return function(e){return a(t,this,arguments)}})),l("ReferenceError",(function(t){return function(e){return a(t,this,arguments)}})),l("SyntaxError",(function(t){return function(e){return a(t,this,arguments)}})),l("TypeError",(function(t){return function(e){return a(t,this,arguments)}})),l("URIError",(function(t){return function(e){return a(t,this,arguments)}})),d("CompileError",(function(t){return function(e){return a(t,this,arguments)}})),d("LinkError",(function(t){return function(e){return a(t,this,arguments)}})),d("RuntimeError",(function(t){return function(e){return a(t,this,arguments)}}))},1817:function(t,e,n){"use strict";var r=n(2109),o=n(9781),a=n(7854),s=n(1702),u=n(2597),i=n(614),c=n(7976),l=n(1340),d=n(3070).f,m=n(9920),p=a.Symbol,f=p&&p.prototype;if(o&&i(p)&&(!("description"in f)||void 0!==p().description)){var h={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=c(f,this)?new p(t):void 0===t?p():p(t);return""===t&&(h[e]=!0),e};m(g,p),g.prototype=f,f.constructor=g;var y="Symbol(test)"==String(p("test")),w=s(f.toString),b=s(f.valueOf),v=/^Symbol\((.*)\)[^)]+$/,x=s("".replace),k=s("".slice);d(f,"description",{configurable:!0,get:function(){var t=b(this),e=w(t);if(u(h,t))return"";var n=y?k(e,7,-1):x(e,v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:g})}}}]);
//# sourceMappingURL=676-legacy.dbdb16e4.js.map