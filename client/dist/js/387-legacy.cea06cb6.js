(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[387],{2052:function(t,e,n){"use strict";n.d(e,{Z:function(){return m}});var r=n(6252),o=n(3577),a=n(9963),u={class:"flex flex-col gap-2"},i={class:"font-bold"},c=["type","name"];function s(t,e,n,s,l,d){return(0,r.wg)(),(0,r.iD)("label",u,[(0,r._)("span",i,(0,o.zw)(d.label),1),(0,r.wy)((0,r._)("input",{type:n.type,class:"shadow-md dark:bg-neutral-600 dark:text-white form-input mt-1 block w-full rounded border",name:s.obj[n.property],"onUpdate:modelValue":e[0]||(e[0]=function(t){return s.obj[n.property]=t})},null,8,c),[[a.YZ,s.obj[n.property]]])])}var l=n(8225),d={props:{which:String,property:String,type:{type:String,default:"text"}},setup:function(t){var e=(0,r.f3)("".concat(t.which,"Data"));return{obj:e}},computed:{label:function(){return(0,l.PS)(this.property)}}},p=n(3744);const f=(0,p.Z)(d,[["render",s]]);var m=f},7387:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return D}});var r=n(6252),o=n(3577),a={class:"home flex flex-col md:flex-row gap-5 justify-center"},u={class:"flex flex-col gap-2 w-60 h-fit rounded p-5 bg-neutral-100 dark:bg-neutral-600 dark:text-white shadow-md text-center"},i=(0,r._)("span",{class:"text-sm"},"Create your own community or post to another communities that you are in here:",-1),c=(0,r.Uk)("Create post"),s=(0,r.Uk)("Create community");function l(t,e,n,l,d,p){var f=(0,r.up)("create-community"),m=(0,r.up)("random-posts"),h=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(f,{class:(0,o.C_)(d.showAddCommunity?"":"hidden"),onClose:e[0]||(e[0]=function(t){return d.showAddCommunity=!1})},null,8,["class"]),(0,r._)("div",a,[(0,r.Wm)(m,{class:"md:w-1/2 w-full"}),(0,r._)("div",u,[i,(0,r.Wm)(h,{to:"/submit",class:"w-full py-1 shadow-sm self-end dark:bg-sky-800 hover:dark:bg-sky-700 bg-blue-500 text-white text-sm dark:text-neutral-200 rounded-full hover:bg-blue-400 transition-all font-bold"},{default:(0,r.w5)((function(){return[c]})),_:1}),(0,r.Wm)(h,{onClick:e[1]||(e[1]=function(t){return d.showAddCommunity=!d.showAddCommunity}),to:"/",class:"w-full py-1 shadow-sm self-end dark:bg-sky-800 hover:dark:bg-sky-700 bg-blue-500 text-sm text-white dark:text-neutral-200 rounded-full hover:bg-blue-400 transition-all font-bold"},{default:(0,r.w5)((function(){return[s]})),_:1})])])],64)}function d(t,e,n,o,a,u){var i=(0,r.up)("post-single");return(0,r.wg)(),(0,r.iD)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.posts,(function(t){return(0,r.wg)(),(0,r.j4)(i,{key:t.id,post:t},null,8,["post"])})),128))])}var p=n(8534),f=(n(5666),n(1539),n(8862),n(356)),m={data:function(){return{posts:[]}},created:function(){var t=this;return(0,p.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n        query LIST_POSTS {\n            posts {\n                id\n                title\n                str\n                createdAt\n                user {\n                    id\n                    username\n                }\n                comments {\n                    id\n                    text\n                    createdAt\n                    user {\n                        id\n                        username\n                    }\n                }\n            }\n        }\n    "})}).then((function(t){return t.json()})).then((function(t){return t.data.posts}));case 2:t.posts=e.sent;case 3:case"end":return e.stop()}}),e)})))()},components:{PostSingle:f.Z}},h=n(3744);const y=(0,h.Z)(m,[["render",d]]);var g=y,b=(n(8309),n(9963)),w={class:"bg-neutral-50 dark:bg-neutral-700 dark:text-white px-20 py-10 rounded transition-all z-50 shadow-md"},v={class:"flex justify-between border-b py-2"},x=(0,r._)("h2",{class:"font-bold w-full py-2"},"Create a community",-1),k={class:"flex flex-col gap-5 py-10"},C={class:"flex flex-col gap-5"},_={class:"py-2 flex flex-col gap-2"},j={class:"flex gap-2 select-none flex-wrap"},E=["onClick"],S={class:"flex shadow-md"},A=(0,r._)("span",{class:"text-xs leading-normal font-semibold text-neutral-500"},"*You won't be able to change the category after creating the community",-1);function I(t,e,n,a,u,i){var c=(0,r.up)("input-component");return(0,r.wg)(),(0,r.iD)("div",{class:"fixed top-0 left-0 w-full h-full flex justify-center p-40 bg-black/75 z-40",onClick:e[4]||(e[4]=(0,b.iM)((function(e){return t.$emit("close")}),["self"]))},[(0,r._)("div",w,[(0,r._)("div",v,[x,(0,r._)("button",{class:"self-end font-bold dark:text-white text-black hover:text-white py-2 px-4 shadow-sm transition-all hover:bg-red-400 border-red-400 rounded-full border",onClick:e[0]||(e[0]=(0,b.iM)((function(e){return t.$emit("close")}),["prevent"]))}," X ")]),(0,r._)("div",k,[(0,r._)("div",C,[(0,r.Wm)(c,{which:"community",property:"name"}),(0,r.Wm)(c,{which:"community",property:"description"})]),(0,r._)("div",_,[(0,r._)("div",j,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(u.categories,(function(t){return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)([{"bg-sky-500 text-white":u.selectedCategory===t.name},"border px-3 border-sky-500 cursor-pointer rounded-full"]),key:t.id,onClick:function(e){return u.selectedCategory=u.selectedCategory!==t.name?t.name:""}},(0,o.zw)(t.name),11,E)})),128))]),(0,r._)("div",S,[(0,r.wy)((0,r._)("input",{class:"dark:bg-neutral-600 dark:text-white form-input shadow-none w-full rounded-l border","onUpdate:modelValue":e[1]||(e[1]=function(t){return u.category=t})},null,512),[[b.nr,u.category]]),(0,r._)("button",{type:"button",onClick:e[2]||(e[2]=function(t){return i.addCategory()}),class:"rounded-r px-8 text-sm text-white bg-blue-600 hover:bg-blue-500 transition-all"}," Add ")]),A]),(0,r._)("button",{class:"rounded-full bg-blue-600 hover:bg-blue-500 p-2 transition-all text-white font-bold text-sm",onClick:e[3]||(e[3]=function(t){return i.createCommunity()})}," Create ")])])])}n(1703),n(2526),n(1817);var R=n(2262),T=n(2052),O={data:function(){return{categories:[],category:"",selectedCategory:""}},setup:function(){var t=(0,R.iH)({name:"",description:"",categoryName:""});(0,r.JJ)("communityData",t);var e=(0,r.f3)("authenticated");return{obj:t,isAuthenticated:e}},created:function(){var t=this;return(0,p.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n        query LIST_CATEGORIES {\n            categories {\n                id\n                name\n            }\n        }"})}).then((function(t){return t.json()})).then((function(t){return t.data.categories}));case 2:t.categories=e.sent;case 3:case"end":return e.stop()}}),e)})))()},methods:{addCategory:function(){var t=this;return(0,p.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n            mutation CREATE_CATEGORY($categoryInput: CategoryInput!) {\n                createCategory(categoryInput: $categoryInput) {\n                    id\n                    name\n                }\n            }\n            ",variables:{categoryInput:{name:t.category}}})}).then((function(t){return t.json()})).then((function(e){if(null==e.data)throw new Error(e);t.categories.push(e.data.createCategory)})).catch((function(t){throw t}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},createCommunity:function(){var t=this;return(0,p.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.selectedCategory){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          mutation CREATE_COMMUNITY($categoryName: String!, $userId: String!, $community: CommunityInput!) {\n            createCommunity(categoryName: $categoryName, adminId: $userId, communityInput: $community) {\n                id\n                name\n                description\n            }\n        }",variables:{categoryName:t.selectedCategory,userId:JSON.parse(sessionStorage.getItem("user")).id,community:{name:t.obj.name,description:t.obj.description}}})}).then((function(t){return t.json()})).then((function(t){return t.data.createCommunity}));case 4:n=e.sent,t.$router.push("/community/".concat(n.id));case 6:case"end":return e.stop()}}),e)})))()}},components:{InputComponent:T.Z}};const Z=(0,h.Z)(O,[["render",I]]);var N=Z,$={name:"homeView",data:function(){return{showAddCommunity:!1}},components:{RandomPosts:g,CreateCommunity:N}};const q=(0,h.Z)($,[["render",l]]);var D=q},2914:function(t,e,n){var r=n(7293),o=n(9114);t.exports=!r((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},8340:function(t,e,n){var r=n(111),o=n(8880);t.exports=function(t,e){r(e)&&"cause"in e&&o(t,"cause",e.cause)}},9191:function(t,e,n){"use strict";var r=n(5005),o=n(2597),a=n(8880),u=n(7976),i=n(7674),c=n(9920),s=n(9587),l=n(6277),d=n(8340),p=n(7741),f=n(2914),m=n(1913);t.exports=function(t,e,n,h){var y=h?2:1,g=t.split("."),b=g[g.length-1],w=r.apply(null,g);if(w){var v=w.prototype;if(!m&&o(v,"cause")&&delete v.cause,!n)return w;var x=r("Error"),k=e((function(t,e){var n=l(h?e:t,void 0),r=h?new w(t):new w;return void 0!==n&&a(r,"message",n),f&&a(r,"stack",p(r.stack,2)),this&&u(v,this)&&s(r,this,k),arguments.length>y&&d(r,arguments[y]),r}));if(k.prototype=v,"Error"!==b&&(i?i(k,x):c(k,x,{name:!0})),c(k,w),!m)try{v.name!==b&&a(v,"name",b),v.constructor=k}catch(C){}return k}}},1703:function(t,e,n){var r=n(2109),o=n(7854),a=n(2104),u=n(9191),i="WebAssembly",c=o[i],s=7!==Error("e",{cause:7}).cause,l=function(t,e){var n={};n[t]=u(t,e,s),r({global:!0,forced:s},n)},d=function(t,e){if(c&&c[t]){var n={};n[t]=u(i+"."+t,e,s),r({target:i,stat:!0,forced:s},n)}};l("Error",(function(t){return function(e){return a(t,this,arguments)}})),l("EvalError",(function(t){return function(e){return a(t,this,arguments)}})),l("RangeError",(function(t){return function(e){return a(t,this,arguments)}})),l("ReferenceError",(function(t){return function(e){return a(t,this,arguments)}})),l("SyntaxError",(function(t){return function(e){return a(t,this,arguments)}})),l("TypeError",(function(t){return function(e){return a(t,this,arguments)}})),l("URIError",(function(t){return function(e){return a(t,this,arguments)}})),d("CompileError",(function(t){return function(e){return a(t,this,arguments)}})),d("LinkError",(function(t){return function(e){return a(t,this,arguments)}})),d("RuntimeError",(function(t){return function(e){return a(t,this,arguments)}}))}}]);
//# sourceMappingURL=387-legacy.cea06cb6.js.map