(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[823],{356:function(t,e,n){"use strict";n.d(e,{Z:function(){return U}});var r=n(6252),o=n(3577),i=n(9963),s={class:"w-full flex flex-col gap-5"},u={class:"w-full mx-auto bg-neutral-50 dark:bg-neutral-600 dark:text-white shadow-md rounded"},c={class:"text-xs font-bold text-gray-500 dark:text-gray-300 pt-2 pl-2"},a={class:"flex flex-col px-4"},l={class:"p-2 py-5 border-b"},f={class:"font-bold text-xl dark:text-white text-black"},m={class:"py-4 px-3"},d={class:"py-2 w-full bg-neutral-50 dark:bg-neutral-600 dark:text-white drop-shadow-md rounded"},p={class:"px-5 py-5"},h={key:0},v=(0,r.Uk)(" Comments: "),b={key:1},w={key:2};function g(t,e,n,g,y,x){var S=(0,r.up)("show-more-button"),k=(0,r.up)("input-comment"),C=(0,r.up)("comment-single");return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",u,[(0,r._)("div",c,[(0,r._)("span",null,"Posted by: "+(0,o.zw)(n.post.user.username)+": "+(0,o.zw)(x.createdAt),1)]),(0,r._)("div",a,[(0,r._)("div",l,[(0,r._)("h3",f,(0,o.zw)(n.post.title),1)]),(0,r.Wm)(S,null,{section:(0,r.w5)((function(){return[(0,r._)("div",m,(0,o.zw)(n.post.str),1)]})),_:1})])]),(0,r._)("div",d,[(0,r.Wm)(k,{postComments:n.post.comments,postId:n.post.id},null,8,["postComments","postId"]),(0,r._)("div",p,[y.showComments?((0,r.wg)(),(0,r.iD)("div",h,[v,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.post.comments,(function(t){return(0,r.wg)(),(0,r.j4)(C,{key:t.id,comment:t},null,8,["comment"])})),128))])):n.post.comments.length>0?((0,r.wg)(),(0,r.iD)("div",b,[(0,r._)("button",{class:"w-full hover:text-blue-400 p-2 text-md",onClick:e[0]||(e[0]=(0,i.iM)((function(t){return y.showComments=!y.showComments}),["prevent"]))}," Show comments ")])):((0,r.wg)(),(0,r.iD)("div",w,"No comments"))])])])}var y={class:"p-2"},x={class:"text-xs font-semibold"},S={class:"pl-2"};function k(t,e,n,i,s,u){return(0,r.wg)(),(0,r.iD)("div",y,[(0,r._)("div",x,(0,o.zw)(n.comment.user.username)+": "+(0,o.zw)(u.createdAt),1),(0,r._)("div",S,(0,o.zw)(n.comment.text),1)])}var C=n(8225),O={props:{comment:Object},computed:{createdAt:function(){return(0,C.Mu)(this.comment.createdAt)}}},_=n(3744);const I=(0,_.Z)(O,[["render",k]]);var j=I,P={class:"p-2 flex flex-col justify-center"},M={class:"w-100 flex justify-center"};function T(t,e,n,o,s,u){return(0,r.wg)(),(0,r.iD)("div",P,[(0,r._)("form",{class:"flex flex-col gap-5",onSubmit:e[2]||(e[2]=(0,i.iM)((function(t){return u.comment()}),["prevent"]))},[(0,r._)("div",M,[(0,r._)("button",{onKeyup:e[0]||(e[0]=(0,i.D2)((function(){return t.submit&&t.submit.apply(t,arguments)}),["enter"])),class:"text-md rounded-full border shadow-md border-blue-400 bg-white px-5 py-1 transition-all hover:bg-blue-400 hover:text-white hover:dark:text-white dark:bg-sky-800 dark:border-0 hover:dark:bg-sky-700"}," Comment ",32)]),(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return s.commentText=t}),class:"form-textarea rounded border w-full h-12 max-h-24 mb-0.5 shadow-lg transition-all resize-none hover:h-24 focus:h-24 dark:bg-neutral-700",placeholder:"Insert comment here"},null,512),[[i.nr,s.commentText]])],32)])}var $=n(8534),A=(n(5666),n(1539),n(8862),n(2262)),D={props:{postId:String,postComments:Array},setup:function(t){var e=(0,r.f3)("authenticated"),n=(0,A.Vh)(t,"postComments");return{comments:n,isAuthenticated:e}},data:function(){return{commentText:""}},methods:{comment:function(){var t=this;return(0,$.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.commentText){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          mutation CREATE_COMMENT($userId: String!, $postId: String!, $commentInput: CommentInput!) {\n            createComment(userId: $userId, postId: $postId, commentInput: $commentInput) {\n              id\n              text\n              user {\n                id\n                username\n              }\n              replies {\n                id\n                text\n              }\n            }\n          }\n          ",variables:{userId:JSON.parse(sessionStorage.getItem("user")).id,postId:t.postId,commentInput:{text:t.commentText}}})}).then((function(t){return t.json()})).then((function(t){return t.data.createComment}));case 4:n=e.sent,console.log(t.comments),t.comments.push(n),t.commentText="";case 8:case"end":return e.stop()}}),e)})))()}}};const N=(0,_.Z)(D,[["render",T]]);var z=N,E=(0,r._)("div",{class:"blur group-hover:bg-black/60 w-full h-10 transition-all ease-in-out"},null,-1),Z=(0,r._)("div",{class:"group-hover:opacity-100 opacity-0 relative bottom-10"}," Show more ",-1),H=[E,Z];function J(t,e,n,i,s,u){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",{ref:"mainPost",class:(0,o.C_)(["p-2 overflow-hidden",s.showMore?"":"max-h-72"])},[(0,r.WI)(t.$slots,"section")],2),(0,r._)("button",{class:(0,o.C_)([s.showMore?"hidden":"","w-full absolute bottom-0 h-10 text-center text-white leading-9"]),onClick:e[0]||(e[0]=function(t){return s.showMore=!s.showMore})},H,2)],64)}var W={data:function(){return{showMore:!1}},mounted:function(){this.showMore=this.$refs.mainPost.offsetHeight==this.$refs.mainPost.scrollHeight}};const R=(0,_.Z)(W,[["render",J]]);var q=R,F={props:{post:Object},data:function(){return{showComments:!1}},computed:{createdAt:function(){return(0,C.Mu)(this.post.createdAt)}},components:{CommentSingle:j,InputComment:z,ShowMoreButton:q}};const K=(0,_.Z)(F,[["render",g]]);var U=K},7235:function(t,e,n){var r=n(857),o=n(2597),i=n(6061),s=n(3070).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});o(e,t)||s(e,t,{value:i.f(t)})}},1156:function(t,e,n){var r=n(4326),o=n(5656),i=n(8006).f,s=n(1589),u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(e){return s(u)}};t.exports.f=function(t){return u&&"Window"==r(t)?c(t):i(o(t))}},857:function(t,e,n){var r=n(7854);t.exports=r},6061:function(t,e,n){var r=n(5112);e.f=r},1817:function(t,e,n){"use strict";var r=n(2109),o=n(9781),i=n(7854),s=n(1702),u=n(2597),c=n(614),a=n(7976),l=n(1340),f=n(3070).f,m=n(9920),d=i.Symbol,p=d&&d.prototype;if(o&&c(d)&&(!("description"in p)||void 0!==d().description)){var h={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=a(p,this)?new d(t):void 0===t?d():d(t);return""===t&&(h[e]=!0),e};m(v,d),v.prototype=p,p.constructor=v;var b="Symbol(test)"==String(d("test")),w=s(p.toString),g=s(p.valueOf),y=/^Symbol\((.*)\)[^)]+$/,x=s("".replace),S=s("".slice);f(p,"description",{configurable:!0,get:function(){var t=g(this),e=w(t);if(u(h,t))return"";var n=b?S(e,7,-1):x(e,y,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:v})}},2526:function(t,e,n){"use strict";var r=n(2109),o=n(7854),i=n(5005),s=n(2104),u=n(6916),c=n(1702),a=n(1913),l=n(9781),f=n(133),m=n(7293),d=n(2597),p=n(3157),h=n(614),v=n(111),b=n(7976),w=n(2190),g=n(9670),y=n(7908),x=n(5656),S=n(4948),k=n(1340),C=n(9114),O=n(30),_=n(1956),I=n(8006),j=n(1156),P=n(5181),M=n(1236),T=n(3070),$=n(6048),A=n(5296),D=n(206),N=n(1320),z=n(2309),E=n(6200),Z=n(3501),H=n(9711),J=n(5112),W=n(6061),R=n(7235),q=n(8003),F=n(9909),K=n(2092).forEach,U=E("hidden"),V="Symbol",Y="prototype",B=J("toPrimitive"),Q=F.set,G=F.getterFor(V),L=Object[Y],X=o.Symbol,tt=X&&X[Y],et=o.TypeError,nt=o.QObject,rt=i("JSON","stringify"),ot=M.f,it=T.f,st=j.f,ut=A.f,ct=c([].push),at=z("symbols"),lt=z("op-symbols"),ft=z("string-to-symbol-registry"),mt=z("symbol-to-string-registry"),dt=z("wks"),pt=!nt||!nt[Y]||!nt[Y].findChild,ht=l&&m((function(){return 7!=O(it({},"a",{get:function(){return it(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=ot(L,e);r&&delete L[e],it(t,e,n),r&&t!==L&&it(L,e,r)}:it,vt=function(t,e){var n=at[t]=O(tt);return Q(n,{type:V,tag:t,description:e}),l||(n.description=e),n},bt=function(t,e,n){t===L&&bt(lt,e,n),g(t);var r=S(e);return g(n),d(at,r)?(n.enumerable?(d(t,U)&&t[U][r]&&(t[U][r]=!1),n=O(n,{enumerable:C(0,!1)})):(d(t,U)||it(t,U,C(1,{})),t[U][r]=!0),ht(t,r,n)):it(t,r,n)},wt=function(t,e){g(t);var n=x(e),r=_(n).concat(kt(n));return K(r,(function(e){l&&!u(yt,n,e)||bt(t,e,n[e])})),t},gt=function(t,e){return void 0===e?O(t):wt(O(t),e)},yt=function(t){var e=S(t),n=u(ut,this,e);return!(this===L&&d(at,e)&&!d(lt,e))&&(!(n||!d(this,e)||!d(at,e)||d(this,U)&&this[U][e])||n)},xt=function(t,e){var n=x(t),r=S(e);if(n!==L||!d(at,r)||d(lt,r)){var o=ot(n,r);return!o||!d(at,r)||d(n,U)&&n[U][r]||(o.enumerable=!0),o}},St=function(t){var e=st(x(t)),n=[];return K(e,(function(t){d(at,t)||d(Z,t)||ct(n,t)})),n},kt=function(t){var e=t===L,n=st(e?lt:x(t)),r=[];return K(n,(function(t){!d(at,t)||e&&!d(L,t)||ct(r,at[t])})),r};if(f||(X=function(){if(b(tt,this))throw et("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?k(arguments[0]):void 0,e=H(t),n=function(t){this===L&&u(n,lt,t),d(this,U)&&d(this[U],e)&&(this[U][e]=!1),ht(this,e,C(1,t))};return l&&pt&&ht(L,e,{configurable:!0,set:n}),vt(e,t)},tt=X[Y],N(tt,"toString",(function(){return G(this).tag})),N(X,"withoutSetter",(function(t){return vt(H(t),t)})),A.f=yt,T.f=bt,$.f=wt,M.f=xt,I.f=j.f=St,P.f=kt,W.f=function(t){return vt(J(t),t)},l&&(it(tt,"description",{configurable:!0,get:function(){return G(this).description}}),a||N(L,"propertyIsEnumerable",yt,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:X}),K(_(dt),(function(t){R(t)})),r({target:V,stat:!0,forced:!f},{for:function(t){var e=k(t);if(d(ft,e))return ft[e];var n=X(e);return ft[e]=n,mt[n]=e,n},keyFor:function(t){if(!w(t))throw et(t+" is not a symbol");if(d(mt,t))return mt[t]},useSetter:function(){pt=!0},useSimple:function(){pt=!1}}),r({target:"Object",stat:!0,forced:!f,sham:!l},{create:gt,defineProperty:bt,defineProperties:wt,getOwnPropertyDescriptor:xt}),r({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:St,getOwnPropertySymbols:kt}),r({target:"Object",stat:!0,forced:m((function(){P.f(1)}))},{getOwnPropertySymbols:function(t){return P.f(y(t))}}),rt){var Ct=!f||m((function(){var t=X();return"[null]"!=rt([t])||"{}"!=rt({a:t})||"{}"!=rt(Object(t))}));r({target:"JSON",stat:!0,forced:Ct},{stringify:function(t,e,n){var r=D(arguments),o=e;if((v(e)||void 0!==t)&&!w(t))return p(e)||(e=function(t,e){if(h(o)&&(e=u(o,this,t,e)),!w(e))return e}),r[1]=e,s(rt,null,r)}})}if(!tt[B]){var Ot=tt.valueOf;N(tt,B,(function(t){return u(Ot,this)}))}q(X,V),Z[U]=!0}}]);
//# sourceMappingURL=823-legacy.947ee08b.js.map