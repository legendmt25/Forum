(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[676],{2052:function(t,e,n){"use strict";n.d(e,{Z:function(){return h}});var o=n(6252),r=n(3577),s=n(9963);const a={class:"flex flex-col gap-2"},i={class:"font-bold"},c=["type","name"];function l(t,e,n,l,u,d){return(0,o.wg)(),(0,o.iD)("label",a,[(0,o._)("span",i,(0,r.zw)(d.label),1),(0,o.wy)((0,o._)("input",{type:n.type,class:"shadow-md dark:bg-neutral-600 dark:text-white form-input mt-1 block w-full rounded border",name:l.obj[n.property],"onUpdate:modelValue":e[0]||(e[0]=t=>l.obj[n.property]=t)},null,8,c),[[s.YZ,l.obj[n.property]]])])}var u=n(8225),d={props:{which:String,property:String,type:{type:String,default:"text"}},setup(t){const e=(0,o.f3)(`${t.which}Data`);return{obj:e}},computed:{label(){return(0,u.PS)(this.property)}}},m=n(3744);const p=(0,m.Z)(d,[["render",l]]);var h=p},356:function(t,e,n){"use strict";n.d(e,{Z:function(){return H}});var o=n(6252),r=n(3577),s=n(9963);const a={class:"w-full flex flex-col gap-5"},i={class:"w-full mx-auto bg-neutral-50 dark:bg-neutral-600 dark:text-white shadow-md rounded"},c={class:"text-xs font-bold text-gray-500 dark:text-gray-300 pt-2 pl-2"},l={class:"flex flex-col px-4"},u={class:"p-2 py-5 border-b"},d={class:"font-bold text-xl dark:text-white text-black"},m={class:"py-4 px-3"},p={class:"py-2 w-full bg-neutral-50 dark:bg-neutral-600 dark:text-white drop-shadow-md rounded"},h={class:"px-5 py-5"},f={key:0},y=(0,o.Uk)(" Comments: "),g={key:1},w={key:2};function b(t,e,n,b,x,v){const C=(0,o.up)("show-more-button"),k=(0,o.up)("input-comment"),_=(0,o.up)("comment-single");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",i,[(0,o._)("div",c,[(0,o._)("span",null,"Posted by: "+(0,r.zw)(n.post.user.username)+": "+(0,r.zw)(v.createdAt),1)]),(0,o._)("div",l,[(0,o._)("div",u,[(0,o._)("h3",d,(0,r.zw)(n.post.title),1)]),(0,o.Wm)(C,null,{section:(0,o.w5)((()=>[(0,o._)("div",m,(0,r.zw)(n.post.str),1)])),_:1})])]),(0,o._)("div",p,[(0,o.Wm)(k,{postComments:n.post.comments,postId:n.post.id},null,8,["postComments","postId"]),(0,o._)("div",h,[x.showComments?((0,o.wg)(),(0,o.iD)("div",f,[y,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.post.comments,(t=>((0,o.wg)(),(0,o.j4)(_,{key:t.id,comment:t},null,8,["comment"])))),128))])):n.post.comments.length>0?((0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("button",{class:"w-full hover:text-blue-400 p-2 text-md",onClick:e[0]||(e[0]=(0,s.iM)((t=>x.showComments=!x.showComments),["prevent"]))}," Show comments ")])):((0,o.wg)(),(0,o.iD)("div",w,"No comments"))])])])}const x={class:"p-2"},v={class:"text-xs font-semibold"},C={class:"pl-2"};function k(t,e,n,s,a,i){return(0,o.wg)(),(0,o.iD)("div",x,[(0,o._)("div",v,(0,r.zw)(n.comment.user.username)+": "+(0,r.zw)(i.createdAt),1),(0,o._)("div",C,(0,r.zw)(n.comment.text),1)])}var _=n(8225),I={props:{comment:Object},computed:{createdAt(){return(0,_.Mu)(this.comment.createdAt)}}},S=n(3744);const j=(0,S.Z)(I,[["render",k]]);var A=j;const T={class:"p-2 flex flex-col justify-center"},E={class:"w-100 flex justify-center"};function $(t,e,n,r,a,i){return(0,o.wg)(),(0,o.iD)("div",T,[(0,o._)("form",{class:"flex flex-col gap-5",onSubmit:e[2]||(e[2]=(0,s.iM)((t=>i.comment()),["prevent"]))},[(0,o._)("div",E,[(0,o._)("button",{onKeyup:e[0]||(e[0]=(0,s.D2)(((...e)=>t.submit&&t.submit(...e)),["enter"])),class:"text-md rounded-full border shadow-md border-blue-400 bg-white px-5 py-1 transition-all hover:bg-blue-400 hover:text-white hover:dark:text-white dark:bg-sky-800 dark:border-0 hover:dark:bg-sky-700"}," Comment ",32)]),(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=t=>a.commentText=t),class:"form-textarea rounded border w-full h-12 max-h-24 mb-0.5 shadow-lg transition-all resize-none hover:h-24 focus:h-24 dark:bg-neutral-700",placeholder:"Insert comment here"},null,512),[[s.nr,a.commentText]])],32)])}var D=n(2262),O={props:{postId:String,postComments:Array},setup(t){const e=(0,o.f3)("authenticated"),n=(0,D.Vh)(t,"postComments");return{comments:n,isAuthenticated:e}},data(){return{commentText:""}},methods:{async comment(){if(""==this.commentText)return;const t=await fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          mutation CREATE_COMMENT($userId: String!, $postId: String!, $commentInput: CommentInput!) {\n            createComment(userId: $userId, postId: $postId, commentInput: $commentInput) {\n              id\n              text\n              user {\n                id\n                username\n              }\n              replies {\n                id\n                text\n              }\n            }\n          }\n          ",variables:{userId:JSON.parse(sessionStorage.getItem("user")).id,postId:this.postId,commentInput:{text:this.commentText}}})}).then((t=>t.json())).then((t=>t.data.createComment));console.log(this.comments),this.comments.push(t),this.commentText=""}}};const M=(0,S.Z)(O,[["render",$]]);var N=M;const P=(0,o._)("div",{class:"blur group-hover:bg-black/60 w-full h-10 transition-all ease-in-out"},null,-1),R=(0,o._)("div",{class:"group-hover:opacity-100 opacity-0 relative bottom-10"}," Show more ",-1),Z=[P,R];function q(t,e,n,s,a,i){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",{ref:"mainPost",class:(0,r.C_)(["p-2 overflow-hidden",a.showMore?"":"max-h-72"])},[(0,o.WI)(t.$slots,"section")],2),(0,o._)("button",{class:(0,r.C_)([a.showMore?"hidden":"","w-full absolute bottom-0 h-10 text-center text-white leading-9"]),onClick:e[0]||(e[0]=t=>a.showMore=!a.showMore)},Z,2)],64)}var z={data(){return{showMore:!1}},mounted(){this.showMore=this.$refs.mainPost.offsetHeight==this.$refs.mainPost.scrollHeight}};const U=(0,S.Z)(z,[["render",q]]);var W=U,J={props:{post:Object},data(){return{showComments:!1}},computed:{createdAt(){return(0,_.Mu)(this.post.createdAt)}},components:{CommentSingle:A,InputComment:N,ShowMoreButton:W}};const Y=(0,S.Z)(J,[["render",b]]);var H=Y},3676:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return P}});var o=n(6252),r=n(3577);const s={class:"home flex flex-col md:flex-row gap-5 justify-center"},a={class:"flex flex-col gap-2 w-60 h-fit rounded p-5 bg-neutral-100 dark:bg-neutral-600 dark:text-white shadow-md text-center"},i=(0,o._)("span",{class:"text-sm"},"Create your own community or post to another communities that you are in here:",-1),c=(0,o.Uk)("Create post"),l=(0,o.Uk)("Create community");function u(t,e,n,u,d,m){const p=(0,o.up)("create-community"),h=(0,o.up)("random-posts"),f=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(p,{class:(0,r.C_)(d.showAddCommunity?"":"hidden"),onClose:e[0]||(e[0]=t=>d.showAddCommunity=!1)},null,8,["class"]),(0,o._)("div",s,[(0,o.Wm)(h,{class:"md:w-1/2 w-full"}),(0,o._)("div",a,[i,(0,o.Wm)(f,{to:"/submit",class:"w-full py-1 shadow-sm self-end dark:bg-sky-800 hover:dark:bg-sky-700 bg-blue-500 text-white text-sm dark:text-neutral-200 rounded-full hover:bg-blue-400 transition-all font-bold"},{default:(0,o.w5)((()=>[c])),_:1}),(0,o.Wm)(f,{onClick:e[1]||(e[1]=t=>d.showAddCommunity=!d.showAddCommunity),to:"/",class:"w-full py-1 shadow-sm self-end dark:bg-sky-800 hover:dark:bg-sky-700 bg-blue-500 text-sm text-white dark:text-neutral-200 rounded-full hover:bg-blue-400 transition-all font-bold"},{default:(0,o.w5)((()=>[l])),_:1})])])],64)}function d(t,e,n,r,s,a){const i=(0,o.up)("post-single");return(0,o.wg)(),(0,o.iD)("div",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.posts,(t=>((0,o.wg)(),(0,o.j4)(i,{key:t.id,post:t},null,8,["post"])))),128))])}var m=n(356),p={data(){return{posts:[]}},async created(){this.posts=await fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n                query LIST_POSTS {\n                    posts {\n                        id\n                        title\n                        str\n                        createdAt\n                        user {\n                            id\n                            username\n                        }\n                        comments {\n                            id\n                            text\n                            createdAt\n                            user {\n                                id\n                                username\n                            }\n                        }\n                    }\n                }\n            "})}).then((t=>t.json())).then((t=>t.data.posts))},components:{PostSingle:m.Z}},h=n(3744);const f=(0,h.Z)(p,[["render",d]]);var y=f,g=n(9963);const w={class:"bg-neutral-50 dark:bg-neutral-700 dark:text-white px-20 py-10 rounded transition-all z-50 shadow-md"},b={class:"flex justify-between border-b py-2"},x=(0,o._)("h2",{class:"font-bold w-full py-2"},"Create a community",-1),v={class:"flex flex-col gap-5 py-10"},C={class:"flex flex-col gap-5"},k={class:"py-2 flex flex-col gap-2"},_={class:"flex gap-2 select-none flex-wrap"},I=["onClick"],S={class:"flex shadow-md"},j=(0,o._)("span",{class:"text-xs leading-normal font-semibold text-neutral-500"},"*You won't be able to change the category after creating the community",-1);function A(t,e,n,s,a,i){const c=(0,o.up)("input-component");return(0,o.wg)(),(0,o.iD)("div",{class:"fixed top-0 left-0 w-full h-full flex justify-center p-40 bg-black/75 z-40",onClick:e[4]||(e[4]=(0,g.iM)((e=>t.$emit("close")),["self"]))},[(0,o._)("div",w,[(0,o._)("div",b,[x,(0,o._)("button",{class:"self-end font-bold dark:text-white text-black hover:text-white py-2 px-4 shadow-sm transition-all hover:bg-red-400 border-red-400 rounded-full border",onClick:e[0]||(e[0]=(0,g.iM)((e=>t.$emit("close")),["prevent"]))}," X ")]),(0,o._)("div",v,[(0,o._)("div",C,[(0,o.Wm)(c,{which:"community",property:"name"}),(0,o.Wm)(c,{which:"community",property:"description"})]),(0,o._)("div",k,[(0,o._)("div",_,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.categories,(t=>((0,o.wg)(),(0,o.iD)("div",{class:(0,r.C_)([{"bg-sky-500 text-white":a.selectedCategory===t.name},"border px-3 border-sky-500 cursor-pointer rounded-full"]),key:t.id,onClick:e=>a.selectedCategory=a.selectedCategory!==t.name?t.name:""},(0,r.zw)(t.name),11,I)))),128))]),(0,o._)("div",S,[(0,o.wy)((0,o._)("input",{class:"dark:bg-neutral-600 dark:text-white form-input shadow-none w-full rounded-l border","onUpdate:modelValue":e[1]||(e[1]=t=>a.category=t)},null,512),[[g.nr,a.category]]),(0,o._)("button",{type:"button",onClick:e[2]||(e[2]=t=>i.addCategory()),class:"rounded-r px-8 text-sm text-white bg-blue-600 hover:bg-blue-500 transition-all"}," Add ")]),j]),(0,o._)("button",{class:"rounded-full bg-blue-600 hover:bg-blue-500 p-2 transition-all text-white font-bold text-sm",onClick:e[3]||(e[3]=t=>i.createCommunity())}," Create ")])])])}n(1703);var T=n(2262),E=n(2052),$={data(){return{categories:[],category:"",selectedCategory:""}},setup(){const t=(0,T.iH)({name:"",description:"",categoryName:""});(0,o.JJ)("communityData",t);const e=(0,o.f3)("authenticated");return{obj:t,isAuthenticated:e}},async created(){this.categories=await fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n        query LIST_CATEGORIES {\n            categories {\n                id\n                name\n            }\n        }"})}).then((t=>t.json())).then((t=>t.data.categories))},methods:{async addCategory(){try{await fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n            mutation CREATE_CATEGORY($categoryInput: CategoryInput!) {\n                createCategory(categoryInput: $categoryInput) {\n                    id\n                    name\n                }\n            }\n            ",variables:{categoryInput:{name:this.category}}})}).then((t=>t.json())).then((t=>{if(null==t.data)throw new Error(t);this.categories.push(t.data.createCategory)})).catch((t=>{throw t}))}catch(t){console.log(t)}},async createCommunity(){if(""==this.selectedCategory)return!1;let t=await fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          mutation CREATE_COMMUNITY($categoryName: String!, $userId: String!, $community: CommunityInput!) {\n            createCommunity(categoryName: $categoryName, adminId: $userId, communityInput: $community) {\n                id\n                name\n                description\n            }\n        }",variables:{categoryName:this.selectedCategory,userId:JSON.parse(sessionStorage.getItem("user")).id,community:{name:this.obj.name,description:this.obj.description}}})}).then((t=>t.json())).then((t=>t.data.createCommunity));this.$router.push(`/community/${t.id}`)}},components:{InputComponent:E.Z}};const D=(0,h.Z)($,[["render",A]]);var O=D,M={name:"homeView",data(){return{showAddCommunity:!1}},components:{RandomPosts:y,CreateCommunity:O}};const N=(0,h.Z)(M,[["render",u]]);var P=N},2914:function(t,e,n){var o=n(7293),r=n(9114);t.exports=!o((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",r(1,7)),7!==t.stack)}))},2104:function(t,e,n){var o=n(4374),r=Function.prototype,s=r.apply,a=r.call;t.exports="object"==typeof Reflect&&Reflect.apply||(o?a.bind(s):function(){return a.apply(s,arguments)})},8340:function(t,e,n){var o=n(111),r=n(8880);t.exports=function(t,e){o(e)&&"cause"in e&&r(t,"cause",e.cause)}},9191:function(t,e,n){"use strict";var o=n(5005),r=n(2597),s=n(8880),a=n(7976),i=n(7674),c=n(9920),l=n(9587),u=n(6277),d=n(8340),m=n(7741),p=n(2914),h=n(1913);t.exports=function(t,e,n,f){var y=f?2:1,g=t.split("."),w=g[g.length-1],b=o.apply(null,g);if(b){var x=b.prototype;if(!h&&r(x,"cause")&&delete x.cause,!n)return b;var v=o("Error"),C=e((function(t,e){var n=u(f?e:t,void 0),o=f?new b(t):new b;return void 0!==n&&s(o,"message",n),p&&s(o,"stack",m(o.stack,2)),this&&a(x,this)&&l(o,this,C),arguments.length>y&&d(o,arguments[y]),o}));if(C.prototype=x,"Error"!==w&&(i?i(C,v):c(C,v,{name:!0})),c(C,b),!h)try{x.name!==w&&s(x,"name",w),x.constructor=C}catch(k){}return C}}},1703:function(t,e,n){var o=n(2109),r=n(7854),s=n(2104),a=n(9191),i="WebAssembly",c=r[i],l=7!==Error("e",{cause:7}).cause,u=function(t,e){var n={};n[t]=a(t,e,l),o({global:!0,forced:l},n)},d=function(t,e){if(c&&c[t]){var n={};n[t]=a(i+"."+t,e,l),o({target:i,stat:!0,forced:l},n)}};u("Error",(function(t){return function(e){return s(t,this,arguments)}})),u("EvalError",(function(t){return function(e){return s(t,this,arguments)}})),u("RangeError",(function(t){return function(e){return s(t,this,arguments)}})),u("ReferenceError",(function(t){return function(e){return s(t,this,arguments)}})),u("SyntaxError",(function(t){return function(e){return s(t,this,arguments)}})),u("TypeError",(function(t){return function(e){return s(t,this,arguments)}})),u("URIError",(function(t){return function(e){return s(t,this,arguments)}})),d("CompileError",(function(t){return function(e){return s(t,this,arguments)}})),d("LinkError",(function(t){return function(e){return s(t,this,arguments)}})),d("RuntimeError",(function(t){return function(e){return s(t,this,arguments)}}))},8225:function(t,e,n){"use strict";n.d(e,{PS:function(){return o},ET:function(){return r},Mu:function(){return s},Rd:function(){return a}});const o=t=>{let e=t.split("").reduce(((t,e)=>e==e.toUpperCase()?`${t} ${e}`:t+e));return e[0].toUpperCase()+e.slice(1)},r=(t,e,n)=>t.map((t=>({text:t[e],value:t[n]}))),s=t=>{let e=Math.abs(new Date(t)-new Date)/1e3,n="days";return e<60?n="seconds":e<3600?(e/=60,n="minutes"):e<216e3&&(e/=3600,n="hours"),`${e.toFixed(0)} ${n} ago`},a=t=>`http://localhost:3000/${t}`}}]);
//# sourceMappingURL=676.621b1b5f.js.map