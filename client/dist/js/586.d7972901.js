"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[586],{7586:function(t,e,n){n.r(e),n.d(e,{default:function(){return N}});var i=n(6252);const a={class:"flex justify-center gap-2"},o={class:"flex flex-col gap-4"};function m(t,e,n,m,s,c){const r=(0,i.up)("communities-list",!0);return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",a,[(0,i.Wm)(r,{category:"random"}),(0,i.Wm)(r,{class:"w-1/3",category:"all"}),(0,i._)("div",o,[(0,i.Wm)(r,{category:"random"}),(0,i.Wm)(r,{category:"gaming"})])])])}var s=n(3577);const c={class:"p-2 bg-neutral-300 w-full text-center text-xs md:text-base"},r={class:"bg-neutral-50 dark:bg-neutral-600 list-inside rounded shadow-md dark:text-white"};function u(t,e,n,a,o,m){const u=(0,i.up)("community-single-item");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",c,(0,s.zw)(m.title),1),(0,i._)("ol",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.communities,(t=>((0,i.wg)(),(0,i.j4)(u,{key:t.id,community:t},null,8,["community"])))),128))])])}const l=["data-community-id"],d=["src"];function y(t,e,n,a,o,m){const c=(0,i.up)("router-link"),r=(0,i.up)("join-community-button");return(0,i.wg)(),(0,i.iD)("li",{"data-community-id":n.community.id,class:"md:flex justify-between p-3 text-center"},[(0,i.Wm)(c,{class:"md:flex gap-2 md:text-base text-sm font-light hover:font-extralight hover:text-blue-400",to:{name:"communityDetailsView",params:{id:n.community.id}}},{default:(0,i.w5)((()=>[(0,i._)("img",{class:"w-7 h-7 mx-auto",src:m.avatarImage,alt:"communityImage"},null,8,d),(0,i.Uk)(" "+(0,s.zw)(n.community.name),1)])),_:1},8,["to"]),(0,i.Wm)(r,{community:n.community,class:"hover:bg-blue-600 rounded-full w-full md:w-auto text-white font-semibold text-sm bg-blue-500 px-3 py-1 transition-all shadow-md"},null,8,["community"])],8,l)}var g=n(9963);function p(t,e,n,a,o,m){return a.isAuthenticated?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"submit",onClick:e[0]||(e[0]=(0,g.iM)((t=>m.joinCommunity(t)),["prevent"])),class:""},"Join")):(0,i.kq)("",!0)}var h={props:{community:Object},setup(){const t=(0,i.f3)("authenticated");return{isAuthenticated:t}},methods:{async joinCommunity(t){await fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          mutation JOIN_COMMUNITY($communityId: String!, $userId: String!) {\n            joinCommunity(communityId: $communityId, userId: $userId) {\n              id\n              name\n            }\n          }\n          ",variables:{communityId:this.community.id,userId:JSON.parse(sessionStorage.getItem("user")).id}})}).then((t=>t.json())).then((t=>t.data.joinCommunity)),t.target.classList.add("bg-green-500"),t.target.classList.remove("hover:bg-blue-600")}}},f=n(3744);const b=(0,f.Z)(h,[["render",p]]);var v=b,I=n(8225),w={props:{community:Object},components:{JoinCommunityButton:v},computed:{avatarImage(){return(0,I.Rd)(this.community.avatarImage)}}};const j=(0,f.Z)(w,[["render",y]]);var x=j,T={components:{CommunitySingleItem:x},props:{category:{type:String,default:"all"}},data(){return{communities:[],categoryThis:""}},async created(){if("all"==this.category)return void(this.communities=await fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          query LIST_COMMUNITIES {\n              communities {\n                  id\n                  name\n                  description\n                  avatarImage\n              }\n          }"})}).then((t=>t.json())).then((t=>t.data.communities)));let t=await fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n        query LIST_CATEGORIES_WITH_COMMUNITIES($categoryName: String) {\n            categories(categoryName: $categoryName) {\n                id\n                name\n                communities {\n                  id\n                  name\n                  description\n                  avatarImage\n                }\n            }\n        }",variables:{categoryName:"random"==this.category?null:this.category}})}).then((t=>t.json())).then((t=>t.data.categories));t=t[parseInt(Math.random()*t.length-1)],this.categoryThis=t.name,this.communities=t.communities},computed:{title(){return""==this.categoryThis?"Top communities":`Top ${this.categoryThis} communities`}}};const S=(0,f.Z)(T,[["render",u]]);var C=S,O={name:"communitiesListView",components:{CommunitiesList:C}};const k=(0,f.Z)(O,[["render",m]]);var N=k}}]);
//# sourceMappingURL=586.d7972901.js.map