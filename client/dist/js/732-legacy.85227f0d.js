(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[732],{8732:function(r,n,e){"use strict";e.r(n),e.d(n,{default:function(){return C}});var t=e(6252),o={class:"flex justify-center"},u={class:"w-full md:w-3/4 bg-neutral-50 dark:bg-neutral-700 dark:text-white rounded shadow-md p-10"},s={class:"border border-solid border-gray-300 p-4 shadow-md"},i=(0,t._)("legend",{class:"text-2xl font-extralight"},"Login",-1),a={class:"p-6 flex flex-col gap-5"},c={class:"flex justify-center"};function l(r,n,e,l,f,d){var p=(0,t.up)("input-component"),h=(0,t.up)("login-user-button");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",u,[(0,t._)("form",null,[(0,t._)("fieldset",s,[i,(0,t._)("div",a,[(0,t.Wm)(p,{which:"user",property:"username"}),(0,t.Wm)(p,{which:"user",property:"password",type:"password"}),(0,t._)("div",c,[(0,t.Wm)(h,{class:"border-2 border-slate-400 rounded-full p-2 px-5 hover:text-white hover:bg-blue-400 hover:border-blue-400 shadow:md hover:shadow-xl"})])])])])])])}var f=e(2052),d=e(2262),p=e(9963);function h(r,n,e,o,u,s){return(0,t.wg)(),(0,t.iD)("button",{type:"submit",onClick:n[0]||(n[0]=(0,p.iM)((function(r){return s.login()}),["prevent"]))},"Login")}var v=e(4648),m=e(8534),g=(e(5666),e(1539),e(8862),e(1703),e(8225)),w={setup:function(){var r=(0,t.f3)("userData"),n=(0,t.f3)("authenticated");return{obj:r,isAuthenticated:n}},methods:{login:function(){var r=this;return(0,m.Z)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          query LOGIN($userCredentials: UserCredentialsInput!) {\n            loginUser(userCredentialsInput: $userCredentials) {\n              id\n              createdAt\n              username\n              firstName\n              lastName\n              email\n              gender\n              options {\n                inboxMessages\n                upvotesOnComments\n                upvotesOnPosts\n                newFollowers\n                newPosts\n              }\n            }\n          }",variables:{userCredentials:(0,v.Z)({},r.obj)}})}).then((function(r){return r.json()})).then((function(r){if(null==r.data)throw Error("Authentication failed: "+JSON.stringify(r.errors));return r.data.loginUser})).catch((function(r){throw r}));case 3:e=n.sent,r.isAuthenticated=!0,sessionStorage.setItem("user",JSON.stringify(e)),r.$router.push("/"),(0,g.B5)(),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](0),alert("Invalid username or password"),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))()}}},b=e(3744);const y=(0,b.Z)(w,[["render",h]]);var x=y,E={name:"loginView",setup:function(){var r=(0,d.iH)({username:"",password:""});return(0,t.JJ)("userData",r),{obj:r}},components:{InputComponent:f.Z,LoginUserButton:x}};const k=(0,b.Z)(E,[["render",l]]);var C=k},2914:function(r,n,e){var t=e(7293),o=e(9114);r.exports=!t((function(){var r=Error("a");return!("stack"in r)||(Object.defineProperty(r,"stack",o(1,7)),7!==r.stack)}))},8340:function(r,n,e){var t=e(111),o=e(8880);r.exports=function(r,n){t(n)&&"cause"in n&&o(r,"cause",n.cause)}},9191:function(r,n,e){"use strict";var t=e(5005),o=e(2597),u=e(8880),s=e(7976),i=e(7674),a=e(9920),c=e(9587),l=e(6277),f=e(8340),d=e(7741),p=e(2914),h=e(1913);r.exports=function(r,n,e,v){var m=v?2:1,g=r.split("."),w=g[g.length-1],b=t.apply(null,g);if(b){var y=b.prototype;if(!h&&o(y,"cause")&&delete y.cause,!e)return b;var x=t("Error"),E=n((function(r,n){var e=l(v?n:r,void 0),t=v?new b(r):new b;return void 0!==e&&u(t,"message",e),p&&u(t,"stack",d(t.stack,2)),this&&s(y,this)&&c(t,this,E),arguments.length>m&&f(t,arguments[m]),t}));if(E.prototype=y,"Error"!==w&&(i?i(E,x):a(E,x,{name:!0})),a(E,b),!h)try{y.name!==w&&u(y,"name",w),y.constructor=E}catch(k){}return E}}},1703:function(r,n,e){var t=e(2109),o=e(7854),u=e(2104),s=e(9191),i="WebAssembly",a=o[i],c=7!==Error("e",{cause:7}).cause,l=function(r,n){var e={};e[r]=s(r,n,c),t({global:!0,forced:c},e)},f=function(r,n){if(a&&a[r]){var e={};e[r]=s(i+"."+r,n,c),t({target:i,stat:!0,forced:c},e)}};l("Error",(function(r){return function(n){return u(r,this,arguments)}})),l("EvalError",(function(r){return function(n){return u(r,this,arguments)}})),l("RangeError",(function(r){return function(n){return u(r,this,arguments)}})),l("ReferenceError",(function(r){return function(n){return u(r,this,arguments)}})),l("SyntaxError",(function(r){return function(n){return u(r,this,arguments)}})),l("TypeError",(function(r){return function(n){return u(r,this,arguments)}})),l("URIError",(function(r){return function(n){return u(r,this,arguments)}})),f("CompileError",(function(r){return function(n){return u(r,this,arguments)}})),f("LinkError",(function(r){return function(n){return u(r,this,arguments)}})),f("RuntimeError",(function(r){return function(n){return u(r,this,arguments)}}))}}]);
//# sourceMappingURL=732-legacy.85227f0d.js.map