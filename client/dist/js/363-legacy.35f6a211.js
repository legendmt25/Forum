(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[363],{2052:function(t,n,e){"use strict";e.d(n,{Z:function(){return h}});var r=e(6252),o=e(3577),i=e(9963),u={class:"flex flex-col gap-2"},a={class:"font-bold"},c=["type","name"];function s(t,n,e,s,l,f){return(0,r.wg)(),(0,r.iD)("label",u,[(0,r._)("span",a,(0,o.zw)(f.label),1),(0,r.wy)((0,r._)("input",{type:e.type,class:"shadow-md dark:bg-neutral-600 dark:text-white form-input mt-1 block w-full rounded border",name:s.obj[e.property],"onUpdate:modelValue":n[0]||(n[0]=function(t){return s.obj[e.property]=t})},null,8,c),[[i.YZ,s.obj[e.property]]])])}var l=e(8225),f={props:{which:String,property:String,type:{type:String,default:"text"}},setup:function(t){var n=(0,r.f3)("".concat(t.which,"Data"));return{obj:n}},computed:{label:function(){return(0,l.PS)(this.property)}}},p=e(3744);const d=(0,p.Z)(f,[["render",s]]);var h=d},5347:function(t,n,e){"use strict";e.d(n,{Z:function(){return m}});var r=e(6252),o=e(3577),i=e(9963),u={class:"flex flex-col gap-2"},a={class:"text-gray-700 dark:text-white font-bold"},c=["size"],s=["value"];function l(t,n,e,l,f,p){return(0,r.wg)(),(0,r.iD)("label",u,[(0,r._)("span",a,(0,o.zw)(p.label),1),(0,r.wy)((0,r._)("select",{size:e.size,class:"form-select dark:bg-neutral-700 shadow-md border rounded w-full","onUpdate:modelValue":n[0]||(n[0]=function(t){return l.obj[e.property]=t})},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.list,(function(t,n){return(0,r.wg)(),(0,r.iD)("option",{value:t.value,key:n},(0,o.zw)(t.text),9,s)})),128))],8,c),[[i.bM,l.obj[e.property]]])])}var f=e(8225),p={props:{size:{type:String,default:"1"},which:String,property:String,list:Array},setup:function(t){var n=(0,r.f3)("".concat(t.which,"Data"));return{obj:n}},computed:{label:function(){return(0,f.PS)(this.property)}}},d=e(3744);const h=(0,d.Z)(p,[["render",l]]);var m=h},9363:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return S}});var r=e(6252),o=e(9963),i={class:"flex flex-col p-24 gap-10 dark:text-white"},u={class:"flex flex-col gap"},a=(0,r._)("span",{class:"font-bold"},"Post",-1);function c(t,n,e,c,s,l){var f=(0,r.up)("select-community"),p=(0,r.up)("input-component"),d=(0,r.up)("create-post-button");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(f),(0,r.Wm)(p,{which:"post",property:"title"}),(0,r._)("label",u,[a,(0,r.wy)((0,r._)("textarea",{class:"resize-y shadow-md dark:bg-neutral-600 form-input rounded-md p-3 border","onUpdate:modelValue":n[0]||(n[0]=function(t){return c.obj.str=t})},null,512),[[o.nr,c.obj.str]])]),(0,r.Wm)(d)])}var s=e(2262),l=e(2052);function f(t,n,e,o,i,u){return(0,r.wg)(),(0,r.iD)("button",{class:"text-base px-10 py-1 shadow-sm self-end dark:bg-sky-800 hover:dark:bg-sky-700 bg-blue-500 rounded-full hover:bg-blue-400 transition-all font-bold text-white",onClick:n[0]||(n[0]=function(t){return u.createPost()})}," Create ")}var p=e(8534),d=(e(5666),e(1539),e(8862),e(1703),{setup:function(){var t=(0,r.f3)("postData"),n=(0,r.f3)("communityData");return{obj:t,community:n}},methods:{createPost:function(){var t=this;return(0,p.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n            mutation CREATE_POST($userId: String!, $communityId: String!, $postInput: PostInput!) {\n                createPost(userId: $userId, communityId: $communityId, postInput: $postInput) {\n                    id\n                    title\n                    createdAt\n                    user {\n                    id\n                    username\n                    email\n                    }\n                    comments{\n                    id\n                    text\n                    }\n                }\n            }\n            ",variables:{userId:JSON.parse(sessionStorage.getItem("user")).id,communityId:t.community.community,postInput:{title:t.obj.title,str:t.obj.str}}})}).then((function(t){return t.json()})).then((function(n){if(null==n.data)throw Error("You cant create a post at this moment. Try again later");return t.$router.push("/community/".concat(t.community.community)),n.data.createPost})).catch((function(t){throw t}));case 3:n.next=8;break;case 5:n.prev=5,n.t0=n["catch"](0),alert(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))()}}}),h=e(3744);const m=(0,h.Z)(d,[["render",f]]);var v=m;function g(t,n,e,o,i,u){var a=(0,r.up)("select-component");return(0,r.wg)(),(0,r.j4)(a,{which:"community",property:"community",list:i.authUserCommunities},null,8,["list"])}var y=e(5347),b=e(8225),w={data:function(){return{authUserCommunities:[]}},components:{SelectComponent:y.Z},created:function(){var t=this;return(0,p.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          query GET_USER_COMMUNITIES($userId: String!) {\n            user(userId: $userId) {\n              communities {\n                id\n                name\n              }\n            }\n          }",variables:{userId:JSON.parse(sessionStorage.getItem("user")).id}})}).then((function(t){return t.json()})).then((function(t){if(null==t.data)throw Error("User not found");return t.data.user.communities})).catch((function(t){throw t}));case 3:t.authUserCommunities=n.sent,t.authUserCommunities=(0,b.ET)(t.authUserCommunities,"name","id"),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}};const x=(0,h.Z)(w,[["render",g]]);var E=x,k={name:"createPostView",setup:function(){var t=(0,s.iH)({title:"",str:""}),n=(0,s.iH)({community:""});(0,r.JJ)("communityData",n),(0,r.JJ)("postData",t);var e=(0,r.f3)("authenticated");return{obj:t,isAuthenticated:e,community:n}},components:{InputComponent:l.Z,createPostButton:v,SelectCommunity:E}};const I=(0,h.Z)(k,[["render",c]]);var S=I},1194:function(t,n,e){var r=e(7293),o=e(5112),i=e(7392),u=o("species");t.exports=function(t){return i>=51||!r((function(){var n=[],e=n.constructor={};return e[u]=function(){return{foo:1}},1!==n[t](Boolean).foo}))}},2914:function(t,n,e){var r=e(7293),o=e(9114);t.exports=!r((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},8340:function(t,n,e){var r=e(111),o=e(8880);t.exports=function(t,n){r(n)&&"cause"in n&&o(t,"cause",n.cause)}},7850:function(t,n,e){var r=e(111),o=e(4326),i=e(5112),u=i("match");t.exports=function(t){var n;return r(t)&&(void 0!==(n=t[u])?!!n:"RegExp"==o(t))}},863:function(t,n,e){var r=e(1702);t.exports=r(1..valueOf)},9191:function(t,n,e){"use strict";var r=e(5005),o=e(2597),i=e(8880),u=e(7976),a=e(7674),c=e(9920),s=e(9587),l=e(6277),f=e(8340),p=e(7741),d=e(2914),h=e(1913);t.exports=function(t,n,e,m){var v=m?2:1,g=t.split("."),y=g[g.length-1],b=r.apply(null,g);if(b){var w=b.prototype;if(!h&&o(w,"cause")&&delete w.cause,!e)return b;var x=r("Error"),E=n((function(t,n){var e=l(m?n:t,void 0),r=m?new b(t):new b;return void 0!==e&&i(r,"message",e),d&&i(r,"stack",p(r.stack,2)),this&&u(w,this)&&s(r,this,E),arguments.length>v&&f(r,arguments[v]),r}));if(E.prototype=w,"Error"!==y&&(a?a(E,x):c(E,x,{name:!0})),c(E,b),!h)try{w.name!==y&&i(w,"name",y),w.constructor=E}catch(k){}return E}}},2222:function(t,n,e){"use strict";var r=e(2109),o=e(7854),i=e(7293),u=e(3157),a=e(111),c=e(7908),s=e(6244),l=e(6135),f=e(5417),p=e(1194),d=e(5112),h=e(7392),m=d("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",y=o.TypeError,b=h>=51||!i((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),w=p("concat"),x=function(t){if(!a(t))return!1;var n=t[m];return void 0!==n?!!n:u(t)},E=!b||!w;r({target:"Array",proto:!0,forced:E},{concat:function(t){var n,e,r,o,i,u=c(this),a=f(u,0),p=0;for(n=-1,r=arguments.length;n<r;n++)if(i=-1===n?u:arguments[n],x(i)){if(o=s(i),p+o>v)throw y(g);for(e=0;e<o;e++,p++)e in i&&l(a,p,i[e])}else{if(p>=v)throw y(g);l(a,p++,i)}return a.length=p,a}})},1249:function(t,n,e){"use strict";var r=e(2109),o=e(2092).map,i=e(1194),u=i("map");r({target:"Array",proto:!0,forced:!u},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},7042:function(t,n,e){"use strict";var r=e(2109),o=e(7854),i=e(3157),u=e(4411),a=e(111),c=e(1400),s=e(6244),l=e(5656),f=e(6135),p=e(5112),d=e(1194),h=e(206),m=d("slice"),v=p("species"),g=o.Array,y=Math.max;r({target:"Array",proto:!0,forced:!m},{slice:function(t,n){var e,r,o,p=l(this),d=s(p),m=c(t,d),b=c(void 0===n?d:n,d);if(i(p)&&(e=p.constructor,u(e)&&(e===g||i(e.prototype))?e=void 0:a(e)&&(e=e[v],null===e&&(e=void 0)),e===g||void 0===e))return h(p,m,b);for(r=new(void 0===e?g:e)(y(b-m,0)),o=0;m<b;m++,o++)m in p&&f(r,o,p[m]);return r.length=o,r}})},1703:function(t,n,e){var r=e(2109),o=e(7854),i=e(2104),u=e(9191),a="WebAssembly",c=o[a],s=7!==Error("e",{cause:7}).cause,l=function(t,n){var e={};e[t]=u(t,n,s),r({global:!0,forced:s},e)},f=function(t,n){if(c&&c[t]){var e={};e[t]=u(a+"."+t,n,s),r({target:a,stat:!0,forced:s},e)}};l("Error",(function(t){return function(n){return i(t,this,arguments)}})),l("EvalError",(function(t){return function(n){return i(t,this,arguments)}})),l("RangeError",(function(t){return function(n){return i(t,this,arguments)}})),l("ReferenceError",(function(t){return function(n){return i(t,this,arguments)}})),l("SyntaxError",(function(t){return function(n){return i(t,this,arguments)}})),l("TypeError",(function(t){return function(n){return i(t,this,arguments)}})),l("URIError",(function(t){return function(n){return i(t,this,arguments)}})),f("CompileError",(function(t){return function(n){return i(t,this,arguments)}})),f("LinkError",(function(t){return function(n){return i(t,this,arguments)}})),f("RuntimeError",(function(t){return function(n){return i(t,this,arguments)}}))},6977:function(t,n,e){"use strict";var r=e(2109),o=e(7854),i=e(1702),u=e(9303),a=e(863),c=e(8415),s=e(7293),l=o.RangeError,f=o.String,p=Math.floor,d=i(c),h=i("".slice),m=i(1..toFixed),v=function(t,n,e){return 0===n?e:n%2===1?v(t,n-1,e*t):v(t*t,n/2,e)},g=function(t){var n=0,e=t;while(e>=4096)n+=12,e/=4096;while(e>=2)n+=1,e/=2;return n},y=function(t,n,e){var r=-1,o=e;while(++r<6)o+=n*t[r],t[r]=o%1e7,o=p(o/1e7)},b=function(t,n){var e=6,r=0;while(--e>=0)r+=t[e],t[e]=p(r/n),r=r%n*1e7},w=function(t){var n=6,e="";while(--n>=0)if(""!==e||0===n||0!==t[n]){var r=f(t[n]);e=""===e?r:e+d("0",7-r.length)+r}return e},x=s((function(){return"0.000"!==m(8e-5,3)||"1"!==m(.9,0)||"1.25"!==m(1.255,2)||"1000000000000000128"!==m(0xde0b6b3a7640080,0)}))||!s((function(){m({})}));r({target:"Number",proto:!0,forced:x},{toFixed:function(t){var n,e,r,o,i=a(this),c=u(t),s=[0,0,0,0,0,0],p="",m="0";if(c<0||c>20)throw l("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return f(i);if(i<0&&(p="-",i=-i),i>1e-21)if(n=g(i*v(2,69,1))-69,e=n<0?i*v(2,-n,1):i/v(2,n,1),e*=4503599627370496,n=52-n,n>0){y(s,0,e),r=c;while(r>=7)y(s,1e7,0),r-=7;y(s,v(10,r,1),0),r=n-1;while(r>=23)b(s,1<<23),r-=23;b(s,1<<r),y(s,1,1),b(s,2),m=w(s)}else y(s,0,e),y(s,1<<-n,0),m=w(s)+d("0",c);return c>0?(o=m.length,m=p+(o<=c?"0."+d("0",c-o)+m:h(m,0,o-c)+"."+h(m,o-c))):m=p+m,m}})},3123:function(t,n,e){"use strict";var r=e(2104),o=e(6916),i=e(1702),u=e(7007),a=e(7850),c=e(9670),s=e(4488),l=e(6707),f=e(1530),p=e(7466),d=e(1340),h=e(8173),m=e(1589),v=e(7651),g=e(2261),y=e(2999),b=e(7293),w=y.UNSUPPORTED_Y,x=4294967295,E=Math.min,k=[].push,I=i(/./.exec),S=i(k),C=i("".slice),j=!b((function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var e="ab".split(t);return 2!==e.length||"a"!==e[0]||"b"!==e[1]}));u("split",(function(t,n,e){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var i=d(s(this)),u=void 0===e?x:e>>>0;if(0===u)return[];if(void 0===t)return[i];if(!a(t))return o(n,i,t,u);var c,l,f,p=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,y=new RegExp(t.source,h+"g");while(c=o(g,y,i)){if(l=y.lastIndex,l>v&&(S(p,C(i,v,c.index)),c.length>1&&c.index<i.length&&r(k,p,m(c,1)),f=c[0].length,v=l,p.length>=u))break;y.lastIndex===c.index&&y.lastIndex++}return v===i.length?!f&&I(y,"")||S(p,""):S(p,C(i,v)),p.length>u?m(p,0,u):p}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:o(n,this,t,e)}:n,[function(n,e){var r=s(this),u=void 0==n?void 0:h(n,t);return u?o(u,n,r,e):o(i,d(r),n,e)},function(t,r){var o=c(this),u=d(t),a=e(i,o,u,r,i!==n);if(a.done)return a.value;var s=l(o,RegExp),h=o.unicode,m=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(w?"g":"y"),g=new s(w?"^(?:"+o.source+")":o,m),y=void 0===r?x:r>>>0;if(0===y)return[];if(0===u.length)return null===v(g,u)?[u]:[];var b=0,k=0,I=[];while(k<u.length){g.lastIndex=w?0:k;var j,P=v(g,w?C(u,k):u);if(null===P||(j=E(p(g.lastIndex+(w?k:0)),u.length))===b)k=f(u,k,h);else{if(S(I,C(u,b,k)),I.length===y)return I;for(var R=1;R<=P.length-1;R++)if(S(I,P[R]),I.length===y)return I;k=b=j}}return S(I,C(u,b)),I}]}),!j,w)},8225:function(t,n,e){"use strict";e.d(n,{PS:function(){return r},ET:function(){return o},Mu:function(){return i},Rd:function(){return u}});e(1539),e(4916),e(3123),e(2222),e(7042),e(1249),e(6977);var r=function(t){var n=t.split("").reduce((function(t,n){return n==n.toUpperCase()?"".concat(t," ").concat(n):t+n}));return n[0].toUpperCase()+n.slice(1)},o=function(t,n,e){return t.map((function(t){return{text:t[n],value:t[e]}}))},i=function(t){var n=Math.abs(new Date(t)-new Date)/1e3,e="days";return n<60?e="seconds":n<3600?(n/=60,e="minutes"):n<216e3&&(n/=3600,e="hours"),"".concat(n.toFixed(0)," ").concat(e," ago")},u=function(t){return"http://localhost:3000/".concat(t)}}}]);
//# sourceMappingURL=363-legacy.35f6a211.js.map