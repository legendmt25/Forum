"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[978],{3978:function(n,e,t){t.r(e),t.d(e,{default:function(){return I}});t(8309),t(2526),t(1817);var a=t(6252),r=t(3577),i={class:"flex flex-row gap-4"},u=["src"],c={class:"font-semibold text-2xl"},o={class:"text-sm"},s={class:"flex justify-center"},m={class:"flex flex-col items-center w-1/2 gap-3"},l={class:"flex gap-3 bg-neutral-50 shadow-sm roudned w-full p-3"},d=(0,a._)("input",{class:"p-1 pl-10 w-full",placeholder:"Create Post",type:"text"},null,-1);function p(n,e,t,p,f,g){var h=(0,a.up)("router-link"),y=(0,a.up)("post-single");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",i,[(0,a._)("button",{onClick:e[0]||(e[0]=function(n){return g.addImage()})},[(0,a._)("img",{src:g.avatarImageSrc,class:"w-10",alt:"community image"},null,8,u)]),(0,a._)("div",null,[(0,a._)("h2",c,(0,r.zw)(f.community.name),1),(0,a._)("p",o,(0,r.zw)(f.community.description),1)])]),(0,a._)("div",s,[(0,a._)("div",m,[(0,a._)("div",l,[(0,a.Wm)(h,{class:"w-full",to:{name:"createPostView",params:{}}},{default:(0,a.w5)((function(){return[d]})),_:1})]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.community.posts,(function(n){return(0,a.wg)(),(0,a.j4)(y,{key:n.id,post:n},null,8,["post"])})),128))])])],64)}var f=t(8534),g=(t(5666),t(1539),t(8862),t(356)),h=t(8225),y={name:"communityDetailsView",components:{PostSingle:g.Z},data:function(){return{community:Object}},created:function(){var n=this;return(0,f.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n            query GET_COMMUNITY($communityId: String!) {\n                community(communityId: $communityId) {\n                    id\n                    name\n                    description\n                    avatarImage\n                    posts {\n                        id\n                        title\n                        str\n                        createdAt\n                        user {\n                            id\n                            username\n                        }\n                        comments {\n                            id\n                            text\n                            createdAt\n                            user {\n                              id\n                              username\n                            }\n                        }\n                    }\n                    admin {\n                      id\n                    }\n                }\n            }",variables:{communityId:n.$route.params.id}})}).then((function(n){return n.json()})).then((function(n){return n.data.community}));case 2:n.community=e.sent;case 3:case"end":return e.stop()}}),e)})))()},methods:{addImage:function(){var n=this;return(0,f.Z)(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.community.admin.id==JSON.parse(sessionStorage.getItem("user")).id){e.next=2;break}return e.abrupt("return");case 2:t=document.createElement("input"),a=new FormData,t.type="file",t.click(),t.addEventListener("change",(0,f.Z)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.files.length){e.next=2;break}return e.abrupt("return");case 2:return a.append("operations",JSON.stringify({query:"\n            mutation UPLOAD_AVATAR_COMMUNITY($communityId: String!, $file: Upload!) {\n              changeAvatar(file: $file, communityId: $communityId) {\n                id\n                avatarImage\n              }\n            }",variables:{communityId:n.$route.params.id,file:null}})),a.append("map",'{ "0": ["variables.file"] }'),a.append("0",t.files[0]),e.next=7,fetch("http://localhost:3000/graphql",{method:"POST",body:a}).then((function(n){return n.json()})).then((function(n){return n.data.changeAvatar}));case 7:r=e.sent,n.community.avatarImage=r.avatarImage;case 9:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e)})))()}},computed:{avatarImageSrc:function(){return(0,h.Rd)(this.community.avatarImage)}}},v=t(3744);const w=(0,v.Z)(y,[["render",p]]);var I=w}}]);
//# sourceMappingURL=978-legacy.ebae1942.js.map