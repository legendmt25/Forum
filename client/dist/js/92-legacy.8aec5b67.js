"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[92],{6092:function(t,n,e){e.r(n),e.d(n,{default:function(){return _}});var i=e(6252),r={class:"flex justify-center gap-2"},a={class:"flex flex-col gap-4"};function o(t,n,e,o,u,c){var m=(0,i.up)("communities-list",!0);return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",r,[(0,i.Wm)(m,{category:"random"}),(0,i.Wm)(m,{class:"w-1/3",category:"all"}),(0,i._)("div",a,[(0,i.Wm)(m,{category:"random"}),(0,i.Wm)(m,{category:"gaming"})])])])}var u=e(3577),c={class:"p-2 bg-neutral-300 w-full text-center text-xs md:text-base"},m={class:"bg-neutral-50 dark:bg-neutral-600 list-inside rounded shadow-md dark:text-white"};function s(t,n,e,r,a,o){var s=(0,i.up)("community-single-item");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",c,(0,u.zw)(o.title),1),(0,i._)("ol",m,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.communities,(function(t){return(0,i.wg)(),(0,i.j4)(s,{key:t.id,community:t},null,8,["community"])})),128))])])}var l=e(8534),d=(e(5666),e(1539),e(8862),e(8309),["data-community-id"]),g=["src"];function p(t,n,e,r,a,o){var c=(0,i.up)("router-link"),m=(0,i.up)("join-community-button");return(0,i.wg)(),(0,i.iD)("li",{"data-community-id":e.community.id,class:"md:flex justify-between p-3 text-center"},[(0,i.Wm)(c,{class:"md:flex gap-2 md:text-base text-sm font-light hover:font-extralight hover:text-blue-400",to:{name:"communityDetailsView",params:{id:e.community.id}}},{default:(0,i.w5)((function(){return[(0,i._)("img",{class:"w-7 h-7 mx-auto",src:o.avatarImage,alt:"communityImage"},null,8,g),(0,i.Uk)(" "+(0,u.zw)(e.community.name),1)]})),_:1},8,["to"]),(0,i.Wm)(m,{community:e.community,class:"hover:bg-blue-600 rounded-full w-full md:w-auto text-white font-semibold text-sm bg-blue-500 px-3 py-1 transition-all shadow-md"},null,8,["community"])],8,d)}var y=e(9963);function h(t,n,e,r,a,o){return r.isAuthenticated?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"submit",onClick:n[0]||(n[0]=(0,y.iM)((function(t){return o.joinCommunity(t)}),["prevent"])),class:""},"Join")):(0,i.kq)("",!0)}var f={props:{community:Object},setup:function(){var t=(0,i.f3)("authenticated");return{isAuthenticated:t}},methods:{joinCommunity:function(t){var n=this;return(0,l.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          mutation JOIN_COMMUNITY($communityId: String!, $userId: String!) {\n            joinCommunity(communityId: $communityId, userId: $userId) {\n              id\n              name\n            }\n          }\n          ",variables:{communityId:n.community.id,userId:JSON.parse(sessionStorage.getItem("user")).id}})}).then((function(t){return t.json()})).then((function(t){return t.data.joinCommunity}));case 2:t.target.classList.add("bg-green-500"),t.target.classList.remove("hover:bg-blue-600");case 4:case"end":return e.stop()}}),e)})))()}}},v=e(3744);const b=(0,v.Z)(f,[["render",h]]);var w=b,I=e(8225),x={props:{community:Object},components:{JoinCommunityButton:w},computed:{avatarImage:function(){return(0,I.Rd)(this.community.avatarImage)}}};const j=(0,v.Z)(x,[["render",p]]);var T=j,S={components:{CommunitySingleItem:T},props:{category:{type:String,default:"all"}},data:function(){return{communities:[],categoryThis:""}},created:function(){var t=this;return(0,l.Z)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("all"!=t.category){n.next=5;break}return n.next=3,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          query LIST_COMMUNITIES {\n              communities {\n                  id\n                  name\n                  description\n                  avatarImage\n              }\n          }"})}).then((function(t){return t.json()})).then((function(t){return t.data.communities}));case 3:return t.communities=n.sent,n.abrupt("return");case 5:return n.next=7,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n        query LIST_CATEGORIES_WITH_COMMUNITIES($categoryName: String) {\n            categories(categoryName: $categoryName) {\n                id\n                name\n                communities {\n                  id\n                  name\n                  description\n                  avatarImage\n                }\n            }\n        }",variables:{categoryName:"random"==t.category?null:t.category}})}).then((function(t){return t.json()})).then((function(t){return t.data.categories}));case 7:e=n.sent,e=e[parseInt(Math.random()*e.length-1)],t.categoryThis=e.name,t.communities=e.communities;case 11:case"end":return n.stop()}}),n)})))()},computed:{title:function(){return""==this.categoryThis?"Top communities":"Top ".concat(this.categoryThis," communities")}}};const C=(0,v.Z)(S,[["render",s]]);var k=C,O={name:"communitiesListView",components:{CommunitiesList:k}};const N=(0,v.Z)(O,[["render",o]]);var _=N}}]);
//# sourceMappingURL=92-legacy.8aec5b67.js.map