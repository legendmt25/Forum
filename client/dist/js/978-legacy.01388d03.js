"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[978],{356:function(t,e,n){n.d(e,{Z:function(){return W}});var r=n(6252),o=n(3577),a=n(9963),s={class:"w-full flex flex-col gap-5"},i={class:"w-full mx-auto bg-neutral-50 dark:bg-neutral-600 dark:text-white shadow-md rounded"},u={class:"text-xs font-bold text-gray-500 dark:text-gray-300 pt-2 pl-2"},c={class:"flex flex-col px-4"},m={class:"p-2 py-5 border-b"},l={class:"font-bold text-xl dark:text-white text-black"},d={class:"py-4 px-3"},p={class:"py-2 w-full bg-neutral-50 dark:bg-neutral-600 dark:text-white drop-shadow-md rounded"},f={class:"px-5 py-5"},h={key:0},v=(0,r.Uk)(" Comments: "),g={key:1},w={key:2};function x(t,e,n,x,b,y){var I=(0,r.up)("show-more-button"),_=(0,r.up)("input-comment"),k=(0,r.up)("comment-single");return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("div",i,[(0,r._)("div",u,[(0,r._)("span",null,"Posted by: "+(0,o.zw)(n.post.user.username)+": "+(0,o.zw)(y.createdAt),1)]),(0,r._)("div",c,[(0,r._)("div",m,[(0,r._)("h3",l,(0,o.zw)(n.post.title),1)]),(0,r.Wm)(I,null,{section:(0,r.w5)((function(){return[(0,r._)("div",d,(0,o.zw)(n.post.str),1)]})),_:1})])]),(0,r._)("div",p,[(0,r.Wm)(_,{postComments:n.post.comments,postId:n.post.id},null,8,["postComments","postId"]),(0,r._)("div",f,[b.showComments?((0,r.wg)(),(0,r.iD)("div",h,[v,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.post.comments,(function(t){return(0,r.wg)(),(0,r.j4)(k,{key:t.id,comment:t},null,8,["comment"])})),128))])):n.post.comments.length>0?((0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("button",{class:"w-full hover:text-blue-400 p-2 text-md",onClick:e[0]||(e[0]=(0,a.iM)((function(t){return b.showComments=!b.showComments}),["prevent"]))}," Show comments ")])):((0,r.wg)(),(0,r.iD)("div",w,"No comments"))])])])}var b={class:"p-2"},y={class:"text-xs font-semibold"},I={class:"pl-2"};function _(t,e,n,a,s,i){return(0,r.wg)(),(0,r.iD)("div",b,[(0,r._)("div",y,(0,o.zw)(n.comment.user.username)+": "+(0,o.zw)(i.createdAt),1),(0,r._)("div",I,(0,o.zw)(n.comment.text),1)])}var k=n(8225),C={props:{comment:Object},computed:{createdAt:function(){return(0,k.Mu)(this.comment.createdAt)}}},S=n(3744);const A=(0,S.Z)(C,[["render",_]]);var $=A,M={class:"p-2 flex flex-col justify-center"},T={class:"w-100 flex justify-center"};function O(t,e,n,o,s,i){return(0,r.wg)(),(0,r.iD)("div",M,[(0,r._)("form",{class:"flex flex-col gap-5",onSubmit:e[2]||(e[2]=(0,a.iM)((function(t){return i.comment()}),["prevent"]))},[(0,r._)("div",T,[(0,r._)("button",{onKeyup:e[0]||(e[0]=(0,a.D2)((function(){return t.submit&&t.submit.apply(t,arguments)}),["enter"])),class:"text-md rounded-full border shadow-md border-blue-400 bg-white px-5 py-1 transition-all hover:bg-blue-400 hover:text-white hover:dark:text-white dark:bg-sky-800 dark:border-0 hover:dark:bg-sky-700"}," Comment ",32)]),(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return s.commentText=t}),class:"form-textarea rounded border w-full h-12 max-h-24 mb-0.5 shadow-lg transition-all resize-none hover:h-24 focus:h-24 dark:bg-neutral-700",placeholder:"Insert comment here"},null,512),[[a.nr,s.commentText]])],32)])}var j=n(8534),D=(n(5666),n(1539),n(8862),n(2262)),P={props:{postId:String,postComments:Array},setup:function(t){var e=(0,r.f3)("authenticated"),n=(0,D.Vh)(t,"postComments");return{comments:n,isAuthenticated:e}},data:function(){return{commentText:""}},methods:{comment:function(){var t=this;return(0,j.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=t.commentText){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n          mutation CREATE_COMMENT($userId: String!, $postId: String!, $commentInput: CommentInput!) {\n            createComment(userId: $userId, postId: $postId, commentInput: $commentInput) {\n              id\n              text\n              user {\n                id\n                username\n              }\n              replies {\n                id\n                text\n              }\n            }\n          }\n          ",variables:{userId:JSON.parse(sessionStorage.getItem("user")).id,postId:t.postId,commentInput:{text:t.commentText}}})}).then((function(t){return t.json()})).then((function(t){return t.data.createComment}));case 4:n=e.sent,console.log(t.comments),t.comments.push(n),t.commentText="";case 8:case"end":return e.stop()}}),e)})))()}}};const R=(0,S.Z)(P,[["render",O]]);var Z=R,z=(0,r._)("div",{class:"blur group-hover:bg-black/60 w-full h-10 transition-all ease-in-out"},null,-1),N=(0,r._)("div",{class:"group-hover:opacity-100 opacity-0 relative bottom-10"}," Show more ",-1),q=[z,N];function E(t,e,n,a,s,i){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",{ref:"mainPost",class:(0,o.C_)(["p-2 overflow-hidden",s.showMore?"":"max-h-72"])},[(0,r.WI)(t.$slots,"section")],2),(0,r._)("button",{class:(0,o.C_)([s.showMore?"hidden":"","w-full absolute bottom-0 h-10 text-center text-white leading-9"]),onClick:e[0]||(e[0]=function(t){return s.showMore=!s.showMore})},q,2)],64)}var H={data:function(){return{showMore:!1}},mounted:function(){this.showMore=this.$refs.mainPost.offsetHeight==this.$refs.mainPost.scrollHeight}};const U=(0,S.Z)(H,[["render",E]]);var Y=U,J={props:{post:Object},data:function(){return{showComments:!1}},computed:{createdAt:function(){return(0,k.Mu)(this.post.createdAt)}},components:{CommentSingle:$,InputComment:Z,ShowMoreButton:Y}};const V=(0,S.Z)(J,[["render",x]]);var W=V},3978:function(t,e,n){n.r(e),n.d(e,{default:function(){return b}});n(8309),n(2526),n(1817);var r=n(6252),o=n(3577),a={class:"flex flex-row gap-4"},s=["src"],i={class:"font-semibold text-2xl"},u={class:"text-sm"},c={class:"flex justify-center"},m={class:"flex flex-col items-center w-1/2 gap-3"},l={class:"flex gap-3 bg-neutral-50 shadow-sm roudned w-full p-3"},d=(0,r._)("input",{class:"p-1 pl-10 w-full",placeholder:"Create Post",type:"text"},null,-1);function p(t,e,n,p,f,h){var v=(0,r.up)("router-link"),g=(0,r.up)("post-single");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",a,[(0,r._)("button",{onClick:e[0]||(e[0]=function(t){return h.addImage()})},[(0,r._)("img",{src:h.avatarImageSrc,class:"w-10",alt:"community image"},null,8,s)]),(0,r._)("div",null,[(0,r._)("h2",i,(0,o.zw)(f.community.name),1),(0,r._)("p",u,(0,o.zw)(f.community.description),1)])]),(0,r._)("div",c,[(0,r._)("div",m,[(0,r._)("div",l,[(0,r.Wm)(v,{class:"w-full",to:{name:"createPostView",params:{}}},{default:(0,r.w5)((function(){return[d]})),_:1})]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(f.community.posts,(function(t){return(0,r.wg)(),(0,r.j4)(g,{key:t.id,post:t},null,8,["post"])})),128))])])],64)}var f=n(8534),h=(n(5666),n(1539),n(8862),n(356)),v=n(8225),g={name:"communityDetailsView",components:{PostSingle:h.Z},data:function(){return{community:Object}},created:function(){var t=this;return(0,f.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"\n            query GET_COMMUNITY($communityId: String!) {\n                community(communityId: $communityId) {\n                    id\n                    name\n                    description\n                    avatarImage\n                    posts {\n                        id\n                        title\n                        str\n                        createdAt\n                        user {\n                            id\n                            username\n                        }\n                        comments {\n                            id\n                            text\n                            createdAt\n                            user {\n                              id\n                              username\n                            }\n                        }\n                    }\n                    admin {\n                      id\n                    }\n                }\n            }",variables:{communityId:t.$route.params.id}})}).then((function(t){return t.json()})).then((function(t){return t.data.community}));case 2:t.community=e.sent;case 3:case"end":return e.stop()}}),e)})))()},methods:{addImage:function(){var t=this;return(0,f.Z)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.community.admin.id==JSON.parse(sessionStorage.getItem("user")).id){e.next=2;break}return e.abrupt("return");case 2:n=document.createElement("input"),r=new FormData,n.type="file",n.click(),n.addEventListener("change",(0,f.Z)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=n.files.length){e.next=2;break}return e.abrupt("return");case 2:return r.append("operations",JSON.stringify({query:"\n            mutation UPLOAD_AVATAR_COMMUNITY($communityId: String!, $file: Upload!) {\n              changeAvatar(file: $file, communityId: $communityId) {\n                id\n                avatarImage\n              }\n            }",variables:{communityId:t.$route.params.id,file:null}})),r.append("map",'{ "0": ["variables.file"] }'),r.append("0",n.files[0]),e.next=7,fetch("http://localhost:3000/graphql",{method:"POST",body:r}).then((function(t){return t.json()})).then((function(t){return t.data.changeAvatar}));case 7:o=e.sent,t.community.avatarImage=o.avatarImage;case 9:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e)})))()}},computed:{avatarImageSrc:function(){return(0,v.Rd)(this.community.avatarImage)}}},w=n(3744);const x=(0,w.Z)(g,[["render",p]]);var b=x},1817:function(t,e,n){var r=n(2109),o=n(9781),a=n(7854),s=n(1702),i=n(2597),u=n(614),c=n(7976),m=n(1340),l=n(3070).f,d=n(9920),p=a.Symbol,f=p&&p.prototype;if(o&&u(p)&&(!("description"in f)||void 0!==p().description)){var h={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:m(arguments[0]),e=c(f,this)?new p(t):void 0===t?p():p(t);return""===t&&(h[e]=!0),e};d(v,p),v.prototype=f,f.constructor=v;var g="Symbol(test)"==String(p("test")),w=s(f.toString),x=s(f.valueOf),b=/^Symbol\((.*)\)[^)]+$/,y=s("".replace),I=s("".slice);l(f,"description",{configurable:!0,get:function(){var t=x(this),e=w(t);if(i(h,t))return"";var n=g?I(e,7,-1):y(e,b,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:v})}}}]);
//# sourceMappingURL=978-legacy.01388d03.js.map